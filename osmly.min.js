function sha1(){function t(t,e){return l(o(t,e))}function e(t,e){t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var o=Array(80),a=1732584193,l=-271733879,h=-1732584194,u=271733878,c=-1009589776,d=0;d<t.length;d+=16){for(var p=a,f=l,m=h,g=u,_=c,y=0;80>y;y++){o[y]=16>y?t[d+y]:s(o[y-3]^o[y-8]^o[y-14]^o[y-16],1);var v=r(r(s(a,5),n(y,l,h,u)),r(r(c,o[y]),i(y)));c=u,u=h,h=s(l,30),l=a,a=v}a=r(a,p),l=r(l,f),h=r(h,m),u=r(u,g),c=r(c,_)}return Array(a,l,h,u,c)}function n(t,e,n,i){return 20>t?e&n|~e&i:40>t?e^n^i:60>t?e&n|e&i|n&i:e^n^i}function i(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function o(t,n){var i=a(t);i.length>16&&(i=e(i,t.length*u));for(var o=Array(16),r=Array(16),s=0;16>s;s++)o[s]=909522486^i[s],r[s]=1549556828^i[s];var l=e(o.concat(a(n)),512+n.length*u);return e(r.concat(l),672)}function r(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function s(t,e){return t<<e|t>>>32-e}function a(t){for(var e=Array(),n=(1<<u)-1,i=0;i<t.length*u;i+=u)e[i>>5]|=(t.charCodeAt(i/u)&n)<<32-u-i%32;return e}function l(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",i=0;i<4*t.length;i+=3)for(var o=(255&t[i>>2]>>8*(3-i%4))<<16|(255&t[i+1>>2]>>8*(3-(i+1)%4))<<8|255&t[i+2>>2]>>8*(3-(i+2)%4),r=0;4>r;r++)n+=8*i+6*r>32*t.length?h:e.charAt(63&o>>6*(3-r));return n}var h="=",u=8;return{b64_hmac_sha1:t}}!function(t,e,n){var i=t.L,o={};o.version="0.6.4","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=i,this},t.L=o,o.Util={extend:function(t){var e,n,i,o,r=Array.prototype.slice.call(arguments,1);for(n=0,i=r.length;i>n;n++){o=r[n]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var i,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(i in t)e.apply(n,[i,t[i]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,n){var i,o;return function r(){var s=arguments;return i?(o=!0,void 0):(i=!0,setTimeout(function(){i=!1,o&&(r.apply(n,s),o=!1)},e),t.apply(n,s),void 0)}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var o=e[i];if(o===n)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,i,o=["webkit","moz","o","ms"];for(n=0;n<o.length&&!i;n++)i=t[o[n]+e];return i}function n(e){var n=+new Date,o=Math.max(0,16-(n-i));return i=n+o,t.setTimeout(e,o)}var i=0,r=t.requestAnimationFrame||e("RequestAnimationFrame")||n,s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,i,s,a){return e=o.bind(e,i),s&&r===n?(e(),void 0):r.call(t,e,a)},o.Util.cancelAnimFrame=function(e){e&&s.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=e,e.prototype=i;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&(e[r]=this[r]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=o.extend({},i.options,t.options)),o.extend(i,t),i._initHooks=[];var s=this;return e.__super__=s.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;e>t;t++)i._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var r="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,s,a,l,h,u,c,d=this[r]=this[r]||{},p=n&&o.stamp(n);for(t=o.Util.splitWords(t),i=0,s=t.length;s>i;i++)a={action:e,context:n||this},l=t[i],n?(h=l+"_idx",u=h+"_len",c=d[h]=d[h]||{},c[p]||(c[p]=[],d[u]=(d[u]||0)+1),c[p].push(a)):(d[l]=d[l]||[],d[l].push(a));return this},hasEventListeners:function(t){var e=this[r];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[r])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,s,a,l,h,u,c,d,p,f=this[r],m=n&&o.stamp(n);for(t=o.Util.splitWords(t),i=0,s=t.length;s>i;i++)if(a=t[i],u=a+"_idx",c=u+"_len",d=f[u],e){if(l=n&&d?d[m]:f[a]){for(h=l.length-1;h>=0;h--)l[h].action!==e||n&&l[h].context!==n||(p=l.splice(h,1),p[0].action=o.Util.falseFn);n&&d&&0===l.length&&(delete d[m],f[c]--)}}else delete f[a],delete f[u];return this},clearAllEventListeners:function(){return delete this[r],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,s,a,l,h=o.Util.extend({},e,{type:t,target:this}),u=this[r];if(u[t])for(n=u[t].slice(),i=0,s=n.length;s>i;i++)n[i].action.call(n[i].context||this,h);a=u[t+"_idx"];for(l in a)if(n=a[l].slice())for(i=0,s=n.length;s>i;i++)n[i].action.call(n[i].context||this,h);return this},addOneTimeEventListener:function(t,e,n){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=o.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var i=!!t.ActiveXObject,r=i&&!t.XMLHttpRequest,s=i&&!e.querySelector,a=i&&!e.addEventListener,l=navigator.userAgent.toLowerCase(),h=-1!==l.indexOf("webkit"),u=-1!==l.indexOf("chrome"),c=-1!==l.indexOf("phantom"),d=-1!==l.indexOf("android"),p=-1!==l.search("android [23]"),f=typeof orientation!=n+"",m=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,_=e.documentElement,y=i&&"transition"in _.style,v="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,L="MozPerspective"in _.style,b="OTransition"in _.style,w=!t.L_DISABLE_3D&&(y||v||L||b)&&!c,x=!t.L_NO_TOUCH&&!c&&function(){var t="ontouchstart";if(m||t in _)return!0;var n=e.createElement("div"),i=!1;return n.setAttribute?(n.setAttribute(t,"return;"),"function"==typeof n[t]&&(i=!0),n.removeAttribute(t),n=null,i):!1}();o.Browser={ie:i,ie6:r,ie7:s,ielt9:a,webkit:h,android:d,android23:p,chrome:u,ie3d:y,webkit3d:v,gecko3d:L,opera3d:b,any3d:w,mobile:f,mobileWebkit:f&&h,mobileWebkit3d:f&&v,mobileOpera:f&&t.opera,touch:x,msTouch:m,retina:g}}(),o.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,i){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===n||null===t?t:new o.Point(t,e,i)},o.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;o>i;i++)this.extend(n[i])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,n=this.max,i=t.min,r=t.max,s=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,n){var i=t.style[n];if(!i&&t.currentStyle&&(i=t.currentStyle[n]),(!i||"auto"===i)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);i=o?o[n]:null}return"auto"===i?null:i},getViewportOffset:function(t){var n,i=0,r=0,s=t,a=e.body,l=e.documentElement,h=o.Browser.ie7;do{if(i+=s.offsetTop||0,r+=s.offsetLeft||0,i+=parseInt(o.DomUtil.getStyle(s,"borderTopWidth"),10)||0,r+=parseInt(o.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,n=o.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===n)break;if("fixed"===n){i+=a.scrollTop||l.scrollTop||0,r+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===n&&!s.offsetLeft){var u=o.DomUtil.getStyle(s,"width"),c=o.DomUtil.getStyle(s,"max-width"),d=s.getBoundingClientRect();("none"!==u||"none"!==c)&&(r+=d.left+s.clientLeft),i+=d.top+(a.scrollTop||l.scrollTop||0);break}s=s.offsetParent}while(s);s=t;do{if(s===a)break;i-=s.scrollTop||0,r-=s.scrollLeft||0,o.DomUtil.documentIsLtr()||!o.Browser.webkit&&!h||(r+=s.scrollWidth-s.clientWidth,h&&"hidden"!==o.DomUtil.getStyle(s,"overflow-y")&&"hidden"!==o.DomUtil.getStyle(s,"overflow")&&(r+=17)),s=s.parentNode}while(s);return new o.Point(r,i)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(e.body,"direction")),o.DomUtil._docIsLtr},create:function(t,n,i){var o=e.createElement(t);return o.className=n,i&&i.appendChild(o),o},hasClass:function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){o.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){t.className=o.Util.trim((" "+t.className+" ").replace(" "+e+" "," "))},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(o){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var n=e.documentElement.style,i=0;i<t.length;i++)if(t[i]in n)return t[i];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){var n=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),i=" scale("+t+") ";return n+i},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&o.Browser.any3d?(t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){var n=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault),n){var i=e.documentElement.style;this._userSelect=i[n],i[n]="none"}},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault),n&&(e.documentElement.style[n]=this._userSelect,delete this._userSelect)},disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e){var n=parseFloat(t),i=parseFloat(e);if(isNaN(n)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=n,this.lng=i},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,n=o.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,r=(t.lng-this.lng)*n,s=this.lat*n,a=t.lat*n,l=Math.sin(i/2),h=Math.sin(r/2),u=l*l+h*h*Math.cos(s)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(t>n||n===e?e:t),new o.LatLng(this.lat,n)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?new o.LatLng(t[0],t[1]):t===n||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;o>i;i++)this.extend(n[i])},o.LatLngBounds.prototype={extend:function(t){return t?(t="number"==typeof t[0]||"string"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this):this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-i,e.lng-r),new o.LatLng(n.lat+i,n.lng+r))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),s=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=t.lng*e,s=i*e;return s=Math.log(Math.tan(Math.PI/4+s/2)),new o.Point(r,s)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(i,n)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==n&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this.setView(this.getCenter(),t,{zoom:e})},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),s=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=s.subtract(r).multiplyBy(1-1/i),l=this.containerPointToLatLng(r.add(a));return this.setView(l,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var n=o.point(e.paddingTopLeft||e.padding||[0,0]),i=o.point(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i)),s=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),l=this.project(t.getNorthEast(),r),h=this.unproject(a.add(l).divideBy(2).add(s),r);return this.setView(h,r,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t,e){if(t=o.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this.off("moveend",this._panInsideMaxBounds,this),this;var n=this.getBoundsZoom(t,!0);return this._boundsMinZoom=n,this._loaded&&(this._zoom<n?this.setView(t.getCenter(),n,e):this.panInsideBounds(t)),this.on("moveend",this._panInsideMaxBounds,this),this},panInsideBounds:function(t){t=o.latLngBounds(t);var e=this.getPixelBounds(),n=e.getBottomLeft(),i=e.getTopRight(),r=this.project(t.getSouthWest()),s=this.project(t.getNorthEast()),a=0,l=0;return i.y<s.y&&(l=Math.ceil(s.y-i.y)),i.x>s.x&&(a=Math.floor(s.x-i.x)),n.y>r.y&&(l=Math.floor(r.y-n.y)),n.x<r.x&&(a=Math.ceil(r.x-n.x)),a||l?this.panBy([a,l]):this},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):void 0},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var n=this.getSize(),i=e.subtract(n).divideBy(2).round();return i.x||i.y?(t.animate&&t.pan?this.panBy(i):(t.pan&&this._rawPanBy(i),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(e){var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this}},remove:function(){return this._loaded&&this.fire("unload"),this._initEvents("off"),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._moved()?this.layerPointToLatLng(this._getCenterLayerPoint()):this._initialCenter},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new o.LatLngBounds(e,n)},getMinZoom:function(){var t=this._layersMinZoom===n?0:this._layersMinZoom,e=this._boundsMinZoom===n?0:this._boundsMinZoom;return this.options.minZoom===n?Math.max(t,e):this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=o.latLngBounds(t);var i,r=this.getMinZoom()-(e?1:0),s=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),h=t.getSouthEast(),u=!0;n=o.point(n||[0,0]);do r++,i=this.project(h,r).subtract(this.project(l,r)).add(n),u=e?i.x<a.x||i.y<a.y:a.contains(i);while(u&&s>=r);return u&&e?null:e?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===n?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===n?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var r=this._zoom!==e;i||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!n}),this.fire("move"),(r||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,o=this._getZoomSpan();for(t in this._zoomBoundLayers){var r=this._zoomBoundLayers[t];isNaN(r.options.minZoom)||(e=Math.min(e,r.options.minZoom)),isNaN(r.options.maxZoom)||(i=Math.max(i,r.options.maxZoom))}t===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=i,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,i,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=r.length;i>n;n++)o.DomEvent[e](this._container,r[n],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&this.dragging&&this.dragging.moved()||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),r=this.layerPointToLatLng(i);this.fire(e,{latlng:r,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=this.R_MAJOR,s=this.R_MINOR,a=t.lng*e*r,l=i*e,h=s/r,u=Math.sqrt(1-h*h),c=u*Math.sin(l);c=Math.pow((1-c)/(1+c),.5*u);
var d=Math.tan(.5*(.5*Math.PI-l))/c;return l=-r*Math.log(d),new o.Point(a,l)},unproject:function(t){for(var e,n=o.LatLng.RAD_TO_DEG,i=this.R_MAJOR,r=this.R_MINOR,s=t.x*n/i,a=r/i,l=Math.sqrt(1-a*a),h=Math.exp(-t.y/i),u=Math.PI/2-2*Math.atan(h),c=15,d=1e-7,p=c,f=.1;Math.abs(f)>d&&--p>0;)e=l*Math.sin(u),f=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-u,u+=f;return new o.LatLng(u*n,s)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,n=t.R_MINOR;return new o.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*n),.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),this._createTileProto(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,r=t.children,s=-e(1/0,-1/0);for(i=0,o=r.length;o>i;i++)r[i]!==this._container&&(n=parseInt(r[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container leaflet-zoom-animated";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),n=this.options.tileSize;if(!(e>this.options.maxZoom||e<this.options.minZoom)){var i=o.bounds(t.min.divideBy(n)._floor(),t.max.divideBy(n)._floor());this._addTilesFromCenterOut(i),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(i)}}},_addTilesFromCenterOut:function(t){var n,i,r,s=[],a=t.getCenter();for(n=t.min.y;n<=t.max.y;n++)for(i=t.min.x;i<=t.max.x;i++)r=new o.Point(i,n),this._tileShouldBeLoaded(r)&&s.push(r);var l=s.length;if(0!==l){s.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var h=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,i=0;l>i;i++)this._addTile(s[i],h);this._tileContainer.appendChild(h)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n)||t.y<0||t.y>=n)return!1}if(e.bounds){var i=e.tileSize,o=t.multiplyBy(i),r=o.add([i,i]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();o.DomUtil.setPosition(i,n,o.Browser.chrome||o.Browser.android23),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this.options.tileSize;return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=o.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this.options.tileSize+"px",t.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==n&&o.DomUtil.setOpacity(t,this.options.opacity),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=o.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;n.width=n.height=e.detectRetina&&o.Browser.retina?2*i:i;for(var r in e)this.options.hasOwnProperty(r)||"crs"===r||(n[r]=e[r]);this.wmsParams=n,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){var n=this._map,i=this.options.tileSize,r=t.multiplyBy(i),s=r.add([i,i]),a=this._crs.project(n.unproject(r,e)),l=this._crs.project(n.unproject(s,e)),h=[a.x,l.y,l.x,a.y].join(","),u=o.Util.template(this._url,{s:this._getSubdomain(t)});return u+o.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+h},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProto:function(){var t=this._canvasProto=o.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),r=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(r,t.zoom,t.center),l=e._latLngToNewLayerPoint(s,t.zoom,t.center)._subtract(a),h=a._add(l._multiplyBy(.5*(1-1/i)));n.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(h)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,n){return new o.ImageOverlay(t,e,n)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n,i=this.options,r=o.point(i[e+"Size"]);n="shadow"===e?o.point(i.shadowAnchor||i.iconAnchor):o.point(i.iconAnchor),!n&&r&&(n=r.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,n){return o.Browser.ie6?(n||(n=e.createElement("div")),n.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(n||(n=e.createElement("img")),n.src=t),n},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var n=o.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,n,i,o,r,s=e.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,n=s.length;n>t;t++)if(i=s[t].src,o=i.match(a))return r=i.split(a)[0],(r?r+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",r=t.icon.createIcon(this._icon),s=!1;r!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(r.title=t.title)),o.DomUtil.addClass(r,i),t.keyboard&&(r.tabIndex="0"),this._icon=r,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(r,"mouseover",this._bringToFront,this).on(r,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&o.DomUtil.addClass(a,i),this._shadow=a,t.opacity<1&&this._updateOpacity();var h=this._map._panes;s&&h.markerPane.appendChild(this._icon),a&&l&&h.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)o.DomEvent.on(t,e[n],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var n=t&&"DIV"===t.tagName?t:e.createElement("div"),i=this.options;return n.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(n.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this._update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},setLatLng:function(t){return this._latlng=o.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=o.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",i),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var r=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",i);o.DomEvent.disableClickPropagation(r),this._contentNode=o.DomUtil.create("div",e+"-content",r),o.DomEvent.on(this._contentNode,"mousewheel",o.DomEvent.stopPropagation),o.DomEvent.on(this._contentNode,"MozMousePixelScroll",o.DomEvent.stopPropagation),o.DomEvent.on(r,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",i),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",o.DomUtil.addClass(t,s)):o.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(o.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(i),s=o.point(this.options.autoPanPadding),a=t.getSize(),l=0,h=0;r.x+n>a.x&&(l=r.x+n-a.x+s.x),r.x-l<0&&(l=r.x-s.x),r.y+e>a.y&&(h=r.y+e-a.y+s.y),r.y-h<0&&(h=r.y-s.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof o.Popup)){var i=t;t=new o.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=o.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(o.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=o.extend({offset:n},e),this._popup||this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:(t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t.layer||(t.layer=t.target),t.target=this,this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,n=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),n=o.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),r=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(i,r)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!e.createElementNS||!e.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),r=e.layerPointToLatLng(i);this.fire(t.type,{latlng:r,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,r=n.y-e.y,s=this._pathRoot,a=this._panes.overlayPane;
o.Browser.mobileWebkit&&a.removeChild(s),o.DomUtil.setPosition(s,e),s.setAttribute("width",i),s.setAttribute("height",r),s.setAttribute("viewBox",[e.x,e.y,i,r].join(" ")),o.Browser.mobileWebkit&&a.appendChild(s)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(i){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,t.dashStyle=n.dashArray?n.dashArray instanceof Array?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):""):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,n,i,r,s;for(this._ctx.beginPath(),t=0,n=this._parts.length;n>t;t++){for(e=0,i=this._parts[t].length;i>e;e++)r=this._parts[t][e],s=(0===e?"move":"line")+"To",this._ctx[s](r.x,r.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,n=this._pathRoot;n||(n=this._pathRoot=e.createElement("canvas"),n.style.position="absolute",t=this._canvasCtx=n.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;o.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var i=t.length,o=typeof Uint8Array!=n+""?Uint8Array:Array,r=new o(i);r[0]=r[i-1]=1,this._simplifyDPStep(t,r,e,0,i-1);var s,a=[];for(s=0;i>s;s++)r[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,n,i,o){var r,s,a,l=0;for(s=i+1;o-1>=s;s++)a=this._sqClosestPointOnSegment(t[s],t[i],t[o],!0),a>l&&(r=s,l=a);l>n&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;r>i;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return r-1>o&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i){var o,r,s,a=i?this._lastCode:this._getBitCode(t,n),l=this._getBitCode(e,n);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,r=this._getEdgeIntersection(t,e,o,n),s=this._getBitCode(r,n),o===a?(t=r,a=s):(e=r,l=s)}},_getEdgeIntersection:function(t,e,n,i){var r=e.x-t.x,s=e.y-t.y,a=i.min,l=i.max;return 8&n?new o.Point(t.x+r*(l.y-t.y)/s,l.y):4&n?new o.Point(t.x+r*(a.y-t.y)/s,a.y):2&n?new o.Point(l.x,t.y+s*(l.x-t.x)/r):1&n?new o.Point(a.x,t.y+s*(a.x-t.x)/r):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var r,s=e.x,a=e.y,l=n.x-s,h=n.y-a,u=l*l+h*h;return u>0&&(r=((t.x-s)*l+(t.y-a)*h)/u,r>1?(s=n.x,a=n.y):r>0&&(s+=l*r,a+=h*r)),l=t.x-s,h=t.y-a,i?l*l+h*h:new o.Point(s,a)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";e>t;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,r=this._parts,s=null,a=0,l=r.length;l>a;a++)for(var h=r[a],u=1,c=h.length;c>u;u++){e=h[u-1],n=h[u];var d=o.LineUtil._sqClosestPointOnSegment(t,e,n,!0);i>d&&(i=d,s=o.LineUtil._sqClosestPointOnSegment(t,e,n))}return s&&(s.distance=Math.sqrt(i)),s},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,r=e?t:[];for(n=0,i=t.length;i>n;n++){if(o.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;r[n]=o.latLng(t[n])}return r},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=o.Path.VML,i=0,r=t.length,s="";r>i;i++)e=t[i],n&&e._round(),s+=(i?"L":"M")+e.x+" "+e.y;return s},_clipPoints:function(){var t,e,n,i=this._originalPoints,r=i.length;if(this.options.noClip)return this._parts=[i],void 0;this._parts=[];var s=this._parts,a=this._map._pathViewport,l=o.LineUtil;for(t=0,e=0;r-1>t;t++)n=l.clipSegment(i[t],i[t+1],a,t),n&&(s[e]=s[e]||[],s[e].push(n[0]),(n[1]!==i[t+1]||t===r-2)&&(s[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,n=0,i=t.length;i>n;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var n,i,r,s,a,l,h,u,c,d=[1,4,2,8],p=o.LineUtil;for(i=0,h=t.length;h>i;i++)t[i]._code=p._getBitCode(t[i],e);for(s=0;4>s;s++){for(u=d[s],n=[],i=0,h=t.length,r=h-1;h>i;r=i++)a=t[i],l=t[r],a._code&u?l._code&u||(c=p._getEdgeIntersection(l,a,u,e),c._code=p._getBitCode(c,e),n.push(c)):(l._code&u&&(c=p._getEdgeIntersection(l,a,u,e),c._code=p._getBitCode(c,e),n.push(c)),n.push(a));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){var n,i,r;if(o.Polyline.prototype.initialize.call(this,t,e),t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),n=0,i=this._holes.length;i>n;n++)r=this._holes[n]=this._convertLatLngs(this._holes[n]),r[0].equals(r[r.length-1])&&r.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,i;for(t=0,n=this._holes.length;n>t;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;i>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;i>n;n++){var r=o.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);r.length&&e.push(r)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){i>n?t.setLatLngs(e[n++]):this.removeLayer(t)},this);i>n;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,n){o.Path.prototype.initialize.call(this,n),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=360*(this._mRadius/40075017),n=this._latlng;return new o.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),o.circle=function(t,e,n){return new o.Circle(t,e,n)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var n,i,r,s,a,l,h,u=this.options.weight/2;for(o.Browser.touch&&(u+=10),n=0,s=this._parts.length;s>n;n++)for(h=this._parts[n],i=0,a=h.length,r=a-1;a>i;r=i++)if((e||0!==i)&&(l=o.LineUtil.pointToSegmentDistance(t,h[r],h[i]),u>=l))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,n,i,r,s,a,l,h,u=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(r=0,l=this._parts.length;l>r;r++)for(e=this._parts[r],s=0,h=e.length,a=h-1;h>s;a=s++)n=e[s],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=o.Util.isArray(t)?t:t.features;if(r){for(e=0,n=r.length;n>e;e++)i=r[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(r[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=o.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng);return a.feature=o.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,n){var i,r,s,a,l,h="Feature"===t.type?t.geometry:t,u=h.coordinates,c=[];switch(n=n||this.coordsToLatLng,h.type){case"Point":return i=n(u),e?e(t,i):new o.Marker(i);case"MultiPoint":for(s=0,a=u.length;a>s;s++)i=n(u[s]),l=e?e(t,i):new o.Marker(i),c.push(l);return new o.FeatureGroup(c);case"LineString":return r=this.coordsToLatLngs(u,0,n),new o.Polyline(r);case"Polygon":return r=this.coordsToLatLngs(u,1,n),new o.Polygon(r);case"MultiLineString":return r=this.coordsToLatLngs(u,1,n),new o.MultiPolyline(r);case"MultiPolygon":return r=this.coordsToLatLngs(u,2,n),new o.MultiPolygon(r);case"GeometryCollection":for(s=0,a=h.geometries.length;a>s;s++)l=this.geometryToLayer({geometry:h.geometries[s],type:"Feature",properties:t.properties},e,n),c.push(l);return new o.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0])},coordsToLatLngs:function(t,e,n){var i,o,r,s=[];for(o=0,r=t.length;r>o;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),s.push(i);return s},latLngToCoords:function(t){return[t.lng,t.lat]},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(o.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var s={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(s),o.Circle.include(s),o.CircleMarker.include(s),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,n,i=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)n=o.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),i.push(n);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t,e){t.include({toGeoJSON:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:e,coordinates:t})}})}t(o.MultiPolyline,"MultiLineString"),t(o.MultiPolygon,"MultiPolygon")}(),o.LayerGroup.include({toGeoJSON:function(){var t=[];return this.eachLayer(function(e){e.toGeoJSON&&t.push(o.GeoJSON.asFeature(e.toGeoJSON()))}),{type:"FeatureCollection",features:t}}}),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,n,i){var r,s,a,l=o.stamp(n),h="_leaflet_"+e+l;return t[h]?this:(r=function(e){return n.call(i||t,e||o.DomEvent._getEvent())},o.Browser.msTouch&&0===e.indexOf("touch")?this.addMsTouchListener(t,e,r,l):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,r,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?(s=r,a="mouseenter"===e?"mouseover":"mouseout",r=function(e){return o.DomEvent._checkMouse(t,e)?s(e):void 0},t.addEventListener(a,r,!1)):"click"===e&&o.Browser.android?(s=r,r=function(t){return o.DomEvent._filterClick(t,s)},t.addEventListener(e,r,!1)):t.addEventListener(e,r,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[h]=r,this))},removeListener:function(t,e,n){var i=o.stamp(n),r="_leaflet_"+e+i,s=t[r];return s?(o.Browser.msTouch&&0===e.indexOf("touch")?this.removeMsTouchListener(t,e,i):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[r]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,n=o.Draggable.START.length-1;n>=0;n--)o.DomEvent.addListener(t,o.Draggable.START[n],e);return o.DomEvent.addListener(t,"click",o.DomEvent._fakeStop).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,n){var i=o.Browser.ie7,r=e.body,s=e.documentElement,a=t.pageX?t.pageX-r.scrollLeft-s.scrollLeft:t.clientX,l=t.pageY?t.pageY-r.scrollTop-s.scrollTop:t.clientY,h=new o.Point(a,l),u=n.getBoundingClientRect(),c=u.left-n.clientLeft,d=u.top-n.clientTop;return o.DomUtil.documentIsLtr()||!o.Browser.webkit&&!i||(c+=n.scrollWidth-n.clientWidth,i&&"hidden"!==o.DomUtil.getStyle(n,"overflow-y")&&"hidden"!==o.DomUtil.getStyle(n,"overflow")&&(c+=17)),h._subtract(new o.Point(c,d))},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(e=n.arguments[0],!e||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=o.DomEvent._lastClick&&n-o.DomEvent._lastClick;return i&&i>100&&1e3>i||t.target._simulatedClick&&!t._simulated?(o.DomEvent.stop(t),void 0):(o.DomEvent._lastClick=n,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(o.DomEvent.stopPropagation(t),!o.Draggable._disabled)){o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection();var n=t.touches?t.touches[0]:t,i=n.target;o.Browser.touch&&"a"===i.tagName.toLowerCase()&&o.DomUtil.addClass(i,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new o.Point(n.clientX,n.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var n=t.touches&&1===t.touches.length?t.touches[0]:t,i=new o.Point(n.clientX,n.clientY),r=i.subtract(this._startPoint);(r.x||r.y)&&(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(r),o.Browser.touch||o.DomUtil.addClass(e.body,"leaflet-dragging")),this._newPos=this._startPos.add(r),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.Browser.touch||o.DomUtil.removeClass(e.body,"leaflet-dragging");for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove).off(e,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),this._onViewReset())}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(){var t=this._map,e=t.options,n=+new Date-this._lastTime,i=!e.inertia||n>e.inertiaThreshold||!this._positions[0];if(t.fire("dragend"),i)t.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime+n-this._times[0])/1e3,a=e.easeLinearity,l=r.multiplyBy(a/s),h=l.distanceTo([0,0]),u=Math.min(e.inertiaMaxSpeed,h),c=l.multiplyBy(u/h),d=u/(e.inertiaDeceleration*a),p=c.multiplyBy(-d/2).round();p.x&&p.y?o.Util.requestAnimFrame(function(){t.panBy(p,{duration:d,easeLinearity:a,noMoveStart:!0})}):t.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setZoomAround(t.containerPoint,this._zoom+1)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&t.setZoomAround(this._lastMousePos,n+e)}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:o.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(t,n,i){function r(t){var e;if(o.Browser.msTouch?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(a||n);l=t.touches?t.touches[0]:t,h=i>0&&u>=i,a=n}}function s(t){if(o.Browser.msTouch){var e=f.indexOf(t.pointerId);if(-1===e)return;f.splice(e,1)}if(h){if(o.Browser.msTouch){var i,r={};for(var s in l)i=l[s],r[s]="function"==typeof i?i.bind(l):i;l=r}l.type="dblclick",n(l),a=null}}var a,l,h=!1,u=250,c="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[c+d+i]=r,t[c+p+i]=s;var m=o.Browser.msTouch?e.documentElement:t;return t.addEventListener(d,r,!1),m.addEventListener(p,s,!1),o.Browser.msTouch&&m.addEventListener("MSPointerCancel",s,!1),this},removeDoubleTapListener:function(t,n){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+n],!1),(o.Browser.msTouch?e.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+n],!1),o.Browser.msTouch&&e.documentElement.removeEventListener("MSPointerCancel",t[i+this._touchend+n],!1),this}}),o.extend(o.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(t,e,n,i){switch(e){case"touchstart":return this.addMsTouchListenerStart(t,e,n,i);case"touchend":return this.addMsTouchListenerEnd(t,e,n,i);case"touchmove":return this.addMsTouchListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(t,n,i,o){var r="_leaflet_",s=this._msTouches,a=function(t){for(var e=!1,n=0;n<s.length;n++)if(s[n].pointerId===t.pointerId){e=!0;break}e||s.push(t),t.touches=s.slice(),t.changedTouches=[t],i(t)};if(t[r+"touchstart"+o]=a,t.addEventListener("MSPointerDown",a,!1),!this._msDocumentListener){var l=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}};e.documentElement.addEventListener("MSPointerUp",l,!1),e.documentElement.addEventListener("MSPointerCancel",l,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(t,e,n,i){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE||0!==t.buttons){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s[e]=t;break}t.touches=s.slice(),t.changedTouches=[t],n(t)}}var r="_leaflet_",s=this._msTouches;return t[r+"touchmove"+i]=o,t.addEventListener("MSPointerMove",o,!1),this},addMsTouchListenerEnd:function(t,e,n,i){var o="_leaflet_",r=this._msTouches,s=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}t.touches=r.slice(),t.changedTouches=[t],n(t)};return t[o+"touchend"+i]=s,t.addEventListener("MSPointerUp",s,!1),t.addEventListener("MSPointerCancel",s,!1),this},removeMsTouchListener:function(t,e,n){var i="_leaflet_",o=t[i+e+n];switch(e){case"touchstart":t.removeEventListener("MSPointerDown",o,!1);break;case"touchmove":t.removeEventListener("MSPointerMove",o,!1);break;case"touchend":t.removeEventListener("MSPointerUp",o,!1),t.removeEventListener("MSPointerCancel",o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(t.touches&&2===t.touches.length&&!n._animatingZoom&&!this._zooming){var i=n.mouseEventToLayerPoint(t.touches[0]),r=n.mouseEventToLayerPoint(t.touches[1]),s=n._getCenterLayerPoint();this._startCenter=i.add(r)._divideBy(2),this._startDist=i.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),n._panAnim&&n._panAnim.stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)
}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return this._zooming=!1,void 0;var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var n=this._getScaleOrigin(),i=t.layerPointToLatLng(n),r=t.getZoom(),s=t.getScaleZoom(this._scale)-r,a=s>0?Math.ceil(s):Math.floor(s),l=t._limitZoom(r+a),h=t.getZoomScale(l)/this._scale;t._animateZoom(i,l,n,h)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,clearTimeout(this._holdTimeout),void 0;var n=t.touches[0],i=n.target;this._startPos=this._newPos=new o.Point(n.clientX,n.clientY),"a"===i.tagName.toLowerCase()&&o.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),o.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var n=t.changedTouches[0],i=n.target;"a"===i.tagName.toLowerCase()&&o.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(n,i){var o=e.createEvent("MouseEvents");o._simulated=!0,i.target._simulatedClick=!0,o.initMouseEvent(n,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.msTouch&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",o.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this),this._map.fire("boxzoomstart"),void 0)},_onMouseMove:function(t){var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),r=i.subtract(e),s=new o.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));o.DomUtil.setPosition(n,s),n.style.width=Math.max(0,Math.abs(r.x)-4)+"px",n.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._pane.removeChild(this._box),this._container.style.cursor="",o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var n=e.body,i=e.documentElement,o=n.scrollTop||i.scrollTop,r=n.scrollLeft||i.scrollLeft;this._map._container.focus(),t.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;n>e;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;n>e;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;n>e;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;n>e;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;n>e;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;n>e;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable()},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=o.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&o.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return o.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,r){var s=n+t+" "+n+r;e[t+r]=o.DomUtil.create("div",s,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=o.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",n=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton("+","Zoom in",e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",e+"-out",n,this._zoomOut,this),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,r,s){var a=o.DomUtil.create("a",n,i);a.innerHTML=t,a.href="#",a.title=e;var l=o.DomEvent.stopPropagation;return o.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",o.DomEvent.preventDefault).on(a,"click",r,s),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=o.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),i=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),r=this.options,s=0;o.x>0&&(s=i*(r.maxWidth/o.x)),this._updateScales(r,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,r=this._iScale;o>5280?(e=o/5280,n=this._getRoundNum(e),r.style.width=this._getScaleWidth(n/e)+"px",r.innerHTML=n+" mi"):(i=this._getRoundNum(o),r.style.width=this._getScaleWidth(i/o)+"px",r.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){o.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):(o.DomEvent.disableClickPropagation(e),o.DomEvent.on(e,"mousewheel",o.DomEvent.stopPropagation));var n=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",o.Browser.touch?o.DomEvent.on(i,"click",o.DomEvent.stop).on(i,"click",this._expand,this):o.DomEvent.on(i,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",n),this._separator=o.DomUtil.create("div",t+"-separator",n),this._overlaysList=o.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=o.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,n){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';n&&(i+=' checked="checked"'),i+="/>";var o=e.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var n,i=e.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?(n=e.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=r):n=this._createRadioElement("leaflet-base-layers",r),n.layerId=o.stamp(t.layer),o.DomEvent.on(n,"click",this._onInputClick,this);var s=e.createElement("span");s.innerHTML=" "+t.name,i.appendChild(n),i.appendChild(s);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(i),i},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;o>t;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,n){return new o.Control.Layers(t,e,n)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,this.fire("step"),void 0):(this._onTransitionEnd(),void 0)},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,i,r=this._el,s=t.getComputedStyle(r);if(o.Browser.any3d){if(i=s[o.DomUtil.TRANSFORM].match(this._transformRe),!i)return;e=parseFloat(i[1]),n=parseFloat(i[2])}else e=parseFloat(s.left),n=parseFloat(s.top);return new o.Point(e,n,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,i){if(e=this._limitZoom(e),t=o.latLng(t),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==n&&(i.zoom=o.extend({animate:i.animate},i.zoom),i.pan=o.extend({animate:i.animate},i.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),r=this._getCenterLayerPoint()._add(o);return n.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,i,null,!0),!0):!1},_animateZoom:function(t,e,n,i,r,s){this._animatingZoom=!0,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:r,backwards:s})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=o.DomUtil.TRANSFORM,i=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[n],r=o.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?r+" "+i:i+" "+r},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&n>.5&&.5>i?(t.style.visibility="hidden",this._stopLoadingImages(t),void 0):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer),void 0)},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;n>e;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,r=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=r.length;n>e;e++)i=r[e],i.complete||(i.onload=o.Util.falseFn,i.onerror=o.Util.falseFn,i.src=o.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),n=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new o.LatLng(e,n),r=180*t.coords.accuracy/40075017,s=r/Math.cos(o.LatLng.DEG_TO_RAD*e),a=o.latLngBounds([e-r,n-s],[e+r,n+s]),l=this._locateOptions;if(l.setView){var h=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(i,h)}var u={latlng:i,bounds:a};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document),function(t,e){function n(t){var e=t.length,n=re.type(t);return re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=fe[t]={};return re.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=re.expando+Math.random()}function r(t,n,i){var o;if(i===e&&1===t.nodeType)if(o="data-"+n.replace(ye,"-$1").toLowerCase(),i=t.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_e.test(i)?JSON.parse(i):i}catch(r){}me.set(t,n,i)}else i=e;return i}function s(){return!0}function a(){return!1}function l(){try{return W.activeElement}catch(t){}}function h(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t,e,n){if(re.isFunction(e))return re.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return re.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Ee.test(e))return re.filter(e,t,n);e=re.filter(e,t)}return re.grep(t,function(t){return ee.call(e,t)>=0!==n})}function c(t,e){return re.nodeName(t,"table")&&re.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Fe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,i=0;n>i;i++)ge.set(t[i],"globalEval",!e||ge.get(e[i],"globalEval"))}function m(t,e){var n,i,o,r,s,a,l,h;if(1===e.nodeType){if(ge.hasData(t)&&(r=ge.access(t),s=ge.set(e,r),h=r.events)){delete s.handle,s.events={};for(o in h)for(n=0,i=h[o].length;i>n;n++)re.event.add(e,o,h[o][n])}me.hasData(t)&&(a=me.access(t),l=re.extend({},a),me.set(e,l))}}function g(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&re.nodeName(t,n)?re.merge([t],i):i}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ie.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=Qe.length;o--;)if(e=Qe[o]+n,e in t)return e;return i}function v(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)}function L(e){return t.getComputedStyle(e,null)}function b(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=ge.get(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&v(i)&&(r[s]=ge.access(i,"olddisplay",D(i.nodeName)))):r[s]||(o=v(i),(n&&"none"!==n||!o)&&ge.set(i,"olddisplay",o?n:re.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function w(t,e,n){var i=qe.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function x(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=re.css(t,n+Ke[r],!0,o)),i?("content"===n&&(s-=re.css(t,"padding"+Ke[r],!0,o)),"margin"!==n&&(s-=re.css(t,"border"+Ke[r]+"Width",!0,o))):(s+=re.css(t,"padding"+Ke[r],!0,o),"padding"!==n&&(s+=re.css(t,"border"+Ke[r]+"Width",!0,o)));return s}function C(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=L(t),s=re.support.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=He(t,e,r),(0>o||null==o)&&(o=t.style[e]),$e.test(o))return o;i=s&&(re.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+x(t,e,n||(s?"border":"content"),i,r)+"px"}function D(t){var e=W,n=Je[t];return n||(n=k(t,e),"none"!==n&&n||(Ze=(Ze||re("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(Ze[0].contentWindow||Ze[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=k(t,e),Ze.detach()),Je[t]=n),n}function k(t,e){var n=re(e.createElement(t)).appendTo(e.body),i=re.css(n[0],"display");return n.remove(),i}function P(t,e,n,i){var o;if(re.isArray(e))re.each(e,function(e,o){n||en.test(t)?i(t,o):P(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==re.type(e))i(t,e);else for(o in e)P(t+"["+o+"]",e[o],n,i)}function E(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(ae)||[];if(re.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function T(t,n,i,o){function r(l){var h;return s[l]=!0,re.each(t[l]||[],function(t,l){var u=l(n,i,o);return"string"!=typeof u||a||s[u]?a?!(h=u):e:(n.dataTypes.unshift(u),r(u),!1)}),h}var s={},a=t===vn;return r(n.dataTypes[0])||!s["*"]&&r("*")}function M(t,n){var i,o,r=re.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((r[i]?t:o||(o={}))[i]=n[i]);return o&&re.extend(!0,t,o),t}function A(t,n,i){for(var o,r,s,a,l=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),o===e&&(o=t.mimeType||n.getResponseHeader("Content-Type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){h.unshift(r);break}if(h[0]in i)s=h[0];else{for(r in i){if(!h[0]||t.converters[r+" "+h[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==h[0]&&h.unshift(s),i[s]):e}function S(t,e,n,i){var o,r,s,a,l,h={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)h[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=h[l+" "+r]||h["* "+r],!s)for(o in h)if(a=o.split(" "),a[1]===r&&(s=h[l+" "+a[0]]||h["* "+a[0]])){s===!0?s=h[o]:h[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function B(){return setTimeout(function(){En=e}),En=re.now()}function O(t,e,n){for(var i,o=(On[e]||[]).concat(On["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,e,t))return i}function N(t,e,n){var i,o,r=0,s=Bn.length,a=re.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=En||B(),n=Math.max(0,h.startTime+h.duration-e),i=n/h.duration||0,r=1-i,s=0,l=h.tweens.length;l>s;s++)h.tweens[s].run(r);return a.notifyWith(t,[h,r,n]),1>r&&l?n:(a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:En||B(),duration:n.duration,tweens:[],createTween:function(e,n){var i=re.Tween(t,h.opts,e,n,h.opts.specialEasing[e]||h.opts.easing);
return h.tweens.push(i),i},stop:function(e){var n=0,i=e?h.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)h.tweens[n].run(1);return e?a.resolveWith(t,[h,e]):a.rejectWith(t,[h,e]),this}}),u=h.props;for(I(u,h.opts.specialEasing);s>r;r++)if(i=Bn[r].call(h,t,u,h.opts))return i;return re.map(u,O,h),re.isFunction(h.opts.start)&&h.opts.start.call(t,h),re.fx.timer(re.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function I(t,e){var n,i,o,r,s;for(n in t)if(i=re.camelCase(n),o=e[i],r=t[n],re.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=re.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function z(t,n,i){var o,r,s,a,l,h,u=this,c={},d=t.style,p=t.nodeType&&v(t),f=ge.get(t,"fxshow");i.queue||(l=re._queueHooks(t,"fx"),null==l.unqueued&&(l.unqueued=0,h=l.empty.fire,l.empty.fire=function(){l.unqueued||h()}),l.unqueued++,u.always(function(){u.always(function(){l.unqueued--,re.queue(t,"fx").length||l.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===re.css(t,"display")&&"none"===re.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(o in n)if(r=n[o],Mn.exec(r)){if(delete n[o],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||f[o]===e)continue;p=!0}c[o]=f&&f[o]||re.style(t,o)}if(!re.isEmptyObject(c)){f?"hidden"in f&&(p=f.hidden):f=ge.access(t,"fxshow",{}),s&&(f.hidden=!p),p?re(t).show():u.done(function(){re(t).hide()}),u.done(function(){var e;ge.remove(t,"fxshow");for(e in c)re.style(t,e,c[e])});for(o in c)a=O(p?f[o]:0,o,u),o in f||(f[o]=a.start,p&&(a.end=a.start,a.start="width"===o||"height"===o?1:0))}}function U(t,e,n,i,o){return new U.prototype.init(t,e,n,i,o)}function F(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=Ke[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t){return re.isWindow(t)?t:9===t.nodeType&&t.defaultView}var j,H,Z=typeof e,G=t.location,W=t.document,q=W.documentElement,$=t.jQuery,V=t.$,J={},X=[],Y="2.0.3",K=X.concat,Q=X.push,te=X.slice,ee=X.indexOf,ne=J.toString,ie=J.hasOwnProperty,oe=Y.trim,re=function(t,e){return new re.fn.init(t,e,j)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^-ms-/,ce=/-([\da-z])/gi,de=function(t,e){return e.toUpperCase()},pe=function(){W.removeEventListener("DOMContentLoaded",pe,!1),t.removeEventListener("load",pe,!1),re.ready()};re.fn=re.prototype={jquery:Y,constructor:re,init:function(t,n,i){var o,r;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:le.exec(t),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(o[1]){if(n=n instanceof re?n[0]:n,re.merge(this,re.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:W,!0)),he.test(o[1])&&re.isPlainObject(n))for(o in n)re.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}return r=W.getElementById(o[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=W,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},ready:function(t){return re.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(re.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:[].sort,splice:[].splice},re.fn.init.prototype=re.fn,re.extend=re.fn.extend=function(){var t,n,i,o,r,s,a=arguments[0]||{},l=1,h=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||re.isFunction(a)||(a={}),h===l&&(a=this,--l);h>l;l++)if(null!=(t=arguments[l]))for(n in t)i=a[n],o=t[n],a!==o&&(u&&o&&(re.isPlainObject(o)||(r=re.isArray(o)))?(r?(r=!1,s=i&&re.isArray(i)?i:[]):s=i&&re.isPlainObject(i)?i:{},a[n]=re.extend(u,s,o)):o!==e&&(a[n]=o));return a},re.extend({expando:"jQuery"+(Y+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===re&&(t.$=V),e&&t.jQuery===re&&(t.jQuery=$),re},isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){(t===!0?--re.readyWait:re.isReady)||(re.isReady=!0,t!==!0&&--re.readyWait>0||(H.resolveWith(W,[re]),re.fn.trigger&&re(W).trigger("ready").off("ready")))},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==re.type(t)||t.nodeType||re.isWindow(t))return!1;try{if(t.constructor&&!ie.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||W;var i=he.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=re.buildFragment([t],e,o),o&&re(o).remove(),re.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(o){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&re.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=re.trim(t),t&&(1===t.indexOf("use strict")?(e=W.createElement("script"),e.text=t,W.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ue,"ms-").replace(ce,de)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;s>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":oe.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?re.merge(i,"string"==typeof t?[t]:t):Q.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var i=n.length,o=t.length,r=0;if("number"==typeof i)for(;i>r;r++)t[o++]=n[r];else for(;n[r]!==e;)t[o++]=n[r++];return t.length=o,t},grep:function(t,e,n){var i,o=[],r=0,s=t.length;for(n=!!n;s>r;r++)i=!!e(t[r],r),n!==i&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,i),null!=o&&(l[l.length]=o);else for(r in t)o=e(t[r],r,i),null!=o&&(l[l.length]=o);return K.apply([],l)},guid:1,proxy:function(t,n){var i,o,r;return"string"==typeof n&&(i=t[n],n=t,t=i),re.isFunction(t)?(o=te.call(arguments,2),r=function(){return t.apply(n||this,o.concat(te.call(arguments)))},r.guid=t.guid=t.guid||re.guid++,r):e},access:function(t,n,i,o,r,s,a){var l=0,h=t.length,u=null==i;if("object"===re.type(i)){r=!0;for(l in i)re.access(t,n,l,i[l],!0,s,a)}else if(o!==e&&(r=!0,re.isFunction(o)||(a=!0),u&&(a?(n.call(t,o),n=null):(u=n,n=function(t,e,n){return u.call(re(t),n)})),n))for(;h>l;l++)n(t[l],i,a?o:o.call(t[l],l,n(t[l],i)));return r?t:u?n.call(t):h?n(t[0],i):s},now:Date.now,swap:function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o}}),re.ready.promise=function(e){return H||(H=re.Deferred(),"complete"===W.readyState?setTimeout(re.ready):(W.addEventListener("DOMContentLoaded",pe,!1),t.addEventListener("load",pe,!1))),H.promise(e)},re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()}),j=re(W),function(t,e){function n(t,e,n,i){var o,r,s,a,l,h,u,c,f,m;if((e?e.ownerDocument||e:R)!==S&&A(e),e=e||S,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!i){if(o=ve.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&U(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return te.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&x.getElementsByClassName&&e.getElementsByClassName)return te.apply(n,e.getElementsByClassName(s)),n}if(x.qsa&&(!N||!N.test(t))){if(c=u=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(h=d(t),(u=e.getAttribute("id"))?c=u.replace(we,"\\$&"):e.setAttribute("id",c),c="[id='"+c+"'] ",l=h.length;l--;)h[l]=c+p(h[l]);f=pe.test(t)&&e.parentNode||e,m=h.join(",")}if(m)try{return te.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{u||e.removeAttribute("id")}}}return b(t.replace(ue,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>D.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function o(t){return t[F]=!0,t}function r(t){var e=S.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=t.length;i--;)D.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function h(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return o(function(e){return e=+e,o(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(){}function d(t,e){var i,o,r,s,a,l,h,u=G[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=D.preFilter;a;){(!i||(o=ce.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=de.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(ue," ")}),a=a.slice(i.length));for(s in D.filter)!(o=_e[s].exec(a))||h[s]&&!(o=h[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):G(t,l).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=H++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,h,u=j+" "+r;if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[F]||(e[F]={}),(l=h[i])&&l[0]===u){if((a=l[1])===!0||a===C)return a===!0}else if(l=h[i]=[u],l[1]=t(e,n,s)||C,l[1]===!0)return!0}}function m(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),h&&e.push(a));return s}function _(t,e,n,i,r,s){return i&&!i[F]&&(i=_(i)),r&&!r[F]&&(r=_(r,s)),o(function(o,s,a,l){var h,u,c,d=[],p=[],f=s.length,m=o||L(e||"*",a.nodeType?[a]:a,[]),_=!t||!o&&e?m:g(m,d,t,a,l),y=n?r||(o?t:f||i)?[]:s:_;if(n&&n(_,y,a,l),i)for(h=g(y,p),i(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[p[u]]=!(_[p[u]]=c));if(o){if(r||t){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(_[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?ne.call(o,c):d[u])>-1&&(o[h]=!(s[h]=c))}}else y=g(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):te.apply(s,y)})}function y(t){for(var e,n,i,o=t.length,r=D.relative[t[0].type],s=r||D.relative[" "],a=r?1:0,l=f(function(t){return t===e},s,!0),h=f(function(t){return ne.call(e,t)>-1},s,!0),u=[function(t,n,i){return!r&&(i||n!==T)||((e=n).nodeType?l(t,n,i):h(t,n,i))}];o>a;a++)if(n=D.relative[t[a].type])u=[f(m(u),n)];else{if(n=D.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;o>i&&!D.relative[t[i].type];i++);return _(a>1&&m(u),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ue,"$1"),n,i>a&&y(t.slice(a,i)),o>i&&y(t=t.slice(i)),o>i&&p(t))}u.push(n)}return m(u)}function v(t,e){var i=0,r=e.length>0,s=t.length>0,a=function(o,a,l,h,u){var c,d,p,f=[],m=0,_="0",y=o&&[],v=null!=u,L=T,b=o||s&&D.find.TAG("*",u&&a.parentNode||a),w=j+=null==L?1:Math.random()||.1;for(v&&(T=a!==S&&a,C=i);null!=(c=b[_]);_++){if(s&&c){for(d=0;p=t[d++];)if(p(c,a,l)){h.push(c);break}v&&(j=w,C=++i)}r&&((c=!p&&c)&&m--,o&&y.push(c))}if(m+=_,r&&_!==m){for(d=0;p=e[d++];)p(y,f,a,l);if(o){if(m>0)for(;_--;)y[_]||f[_]||(f[_]=K.call(h));f=g(f)}te.apply(h,f),v&&!o&&f.length>0&&m+e.length>1&&n.uniqueSort(h)}return v&&(j=w,T=L),y};return r?o(a):a}function L(t,e,i){for(var o=0,r=e.length;r>o;o++)n(t,e[o],i);return i}function b(t,e,n,i){var o,r,s,a,l,h=d(t);if(!i&&1===h.length){if(r=h[0]=h[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&x.getById&&9===e.nodeType&&O&&D.relative[r[1].type]){if(e=(D.find.ID(s.matches[0].replace(xe,Ce),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=_e.needsContext.test(t)?0:r.length;o--&&(s=r[o],!D.relative[a=s.type]);)if((l=D.find[a])&&(i=l(s.matches[0].replace(xe,Ce),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=i.length&&p(r),!t)return te.apply(n,i),n;break}}return E(t,h)(i,e,!O,n,pe.test(t)),n}var w,x,C,D,k,P,E,T,M,A,S,B,O,N,I,z,U,F="sizzle"+-new Date,R=t.document,j=0,H=0,Z=i(),G=i(),W=i(),q=!1,$=function(t,e){return t===e?(q=!0,0):0},V=typeof e,J=1<<31,X={}.hasOwnProperty,Y=[],K=Y.pop,Q=Y.push,te=Y.push,ee=Y.slice,ne=Y.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oe="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=se.replace("w","w#"),le="\\["+oe+"*("+se+")"+oe+"*(?:([*^$|!~]?=)"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+oe+"*\\]",he=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+le.replace(3,8)+")*)|.*)\\)|)",ue=RegExp("^"+oe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oe+"+$","g"),ce=RegExp("^"+oe+"*,"+oe+"*"),de=RegExp("^"+oe+"*([>+~]|"+oe+")"+oe+"*"),pe=RegExp(oe+"*[+~]"),fe=RegExp("="+oe+"*([^\\]'\"]*)"+oe+"*\\]","g"),me=RegExp(he),ge=RegExp("^"+ae+"$"),_e={ID:RegExp("^#("+se+")"),CLASS:RegExp("^\\.("+se+")"),TAG:RegExp("^("+se.replace("w","w*")+")"),ATTR:RegExp("^"+le),PSEUDO:RegExp("^"+he),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oe+"*(even|odd|(([+-]|)(\\d*)n|)"+oe+"*(?:([+-]|)"+oe+"*(\\d+)|))"+oe+"*\\)|)","i"),bool:RegExp("^(?:"+ie+")$","i"),needsContext:RegExp("^"+oe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oe+"*((?:-\\d)?\\d*)"+oe+"*\\)|)(?=[^-]|$)","i")},ye=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Le=/^(?:input|select|textarea|button)$/i,be=/^h\d$/i,we=/'|\\/g,xe=RegExp("\\\\([\\da-f]{1,6}"+oe+"?|("+oe+")|.)","ig"),Ce=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{te.apply(Y=ee.call(R.childNodes),R.childNodes),Y[R.childNodes.length].nodeType}catch(De){te={apply:Y.length?function(t,e){Q.apply(t,ee.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}P=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},x=n.support={},A=n.setDocument=function(t){var n=t?t.ownerDocument||t:R,i=n.defaultView;return n!==S&&9===n.nodeType&&n.documentElement?(S=n,B=n.documentElement,O=!P(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){A()}),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=r(function(t){return B.appendChild(t).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),x.getById?(D.find.ID=function(t,e){if(typeof e.getElementById!==V&&O){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},D.filter.ID=function(t){var e=t.replace(xe,Ce);return function(t){return t.getAttribute("id")===e}}):(delete D.find.ID,D.filter.ID=function(t){var e=t.replace(xe,Ce);return function(t){var n=typeof t.getAttributeNode!==V&&t.getAttributeNode("id");return n&&n.value===e}}),D.find.TAG=x.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==V?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},D.find.CLASS=x.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==V&&O?n.getElementsByClassName(t):e},I=[],N=[],(x.qsa=ye.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||N.push("\\["+oe+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||N.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&N.push("[*^$]="+oe+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(x.matchesSelector=ye.test(z=B.webkitMatchesSelector||B.mozMatchesSelector||B.oMatchesSelector||B.msMatchesSelector))&&r(function(t){x.disconnectedMatch=z.call(t,"div"),z.call(t,"[s!='']:x"),I.push("!=",he)}),N=N.length&&RegExp(N.join("|")),I=I.length&&RegExp(I.join("|")),U=ye.test(B.contains)||B.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=B.compareDocumentPosition?function(t,e){if(t===e)return q=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||!x.sortDetached&&e.compareDocumentPosition(t)===i?t===n||U(R,t)?-1:e===n||U(R,e)?1:M?ne.call(M,t)-ne.call(M,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,r=t.parentNode,s=e.parentNode,l=[t],h=[e];if(t===e)return q=!0,0;if(!r||!s)return t===n?-1:e===n?1:r?-1:s?1:M?ne.call(M,t)-ne.call(M,e):0;if(r===s)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[o]===h[o];)o++;return o?a(l[o],h[o]):l[o]===R?-1:h[o]===R?1:0},n):S},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==S&&A(t),e=e.replace(fe,"='$1']"),!(!x.matchesSelector||!O||I&&I.test(e)||N&&N.test(e)))try{var i=z.call(t,e);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return n(e,S,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==S&&A(t),U(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==S&&A(t);var i=D.attrHandle[n.toLowerCase()],o=i&&X.call(D.attrHandle,n.toLowerCase())?i(t,n,!O):e;return o===e?x.attributes||!O?t.getAttribute(n):(o=t.getAttributeNode(n))&&o.specified?o.value:null:o},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,o=0;if(q=!x.detectDuplicates,M=!x.sortStable&&t.slice(0),t.sort($),q){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},k=n.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=k(e);return n},D=n.selectors={cacheLength:50,createPseudo:o,match:_e,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,Ce),t[3]=(t[4]||t[5]||"").replace(xe,Ce),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return _e.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&me.test(i)&&(n=d(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xe,Ce).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Z[t+" "];return e||(e=RegExp("(^|"+oe+")"+t+"("+oe+"|$)"))&&Z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==V&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(o){var r=n.attr(o,t);return null==r?"!="===e:e?(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r+" ").indexOf(i)>-1:"|="===e?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,p,f,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,_=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===_:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(u=g[F]||(g[F]={}),h=u[t]||[],p=h[0]===j&&h[1],d=h[0]===j&&h[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[j,p,d];break}}else if(y&&(h=(e[F]||(e[F]={}))[t])&&h[0]===j)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==_:1!==c.nodeType)||!++d||(y&&((c[F]||(c[F]={}))[t]=[j,d]),c!==e)););return d-=o,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,e){var i,r=D.pseudos[t]||D.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(i=[t,t,"",e],D.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=ne.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:o(function(t){var e=[],n=[],i=E(t.replace(ue,"$1"));return i[F]?o(function(t,e,n,o){for(var r,s=i(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,o,r){return e[0]=t,i(e,null,r,n),!n.pop()}}),has:o(function(t){return function(e){return n(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:o(function(t){return ge.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(xe,Ce).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===B},focus:function(t){return t===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!D.pseudos.empty(t)},header:function(t){return be.test(t.nodeName)},input:function(t){return Le.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},D.pseudos.nth=D.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[w]=l(w);for(w in{submit:!0,reset:!0})D.pseudos[w]=h(w);c.prototype=D.filters=D.pseudos,D.setFilters=new c,E=n.compile=function(t,e){var n,i=[],o=[],r=W[t+" "];if(!r){for(e||(e=d(t)),n=e.length;n--;)r=y(e[n]),r[F]?i.push(r):o.push(r);r=W(t,v(o,i))}return r},x.sortStable=F.split("").sort($).join("")===F,x.detectDuplicates=q,A(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(S.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,n,i){return i?e:t.getAttribute(n,"type"===n.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,n,i){return i||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(ie,function(t,n,i){var o;return i?e:(o=t.getAttributeNode(n))&&o.specified?o.value:t[n]===!0?n.toLowerCase():null}),re.find=n,re.expr=n.selectors,re.expr[":"]=re.expr.pseudos,re.unique=n.uniqueSort,re.text=n.getText,re.isXMLDoc=n.isXML,re.contains=n.contains}(t);var fe={};re.Callbacks=function(t){t="string"==typeof t?fe[t]||i(t):re.extend({},t);var n,o,r,s,a,l,h=[],u=!t.once&&[],c=function(e){for(n=t.memory&&e,o=!0,l=s||0,s=0,a=h.length,r=!0;h&&a>l;l++)if(h[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}r=!1,h&&(u?u.length&&c(u.shift()):n?h=[]:d.disable())},d={add:function(){if(h){var e=h.length;!function i(e){re.each(e,function(e,n){var o=re.type(n);"function"===o?t.unique&&d.has(n)||h.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),r?a=h.length:n&&(s=e,c(n))}return this},remove:function(){return h&&re.each(arguments,function(t,e){for(var n;(n=re.inArray(e,h,n))>-1;)h.splice(n,1),r&&(a>=n&&a--,l>=n&&l--)}),this},has:function(t){return t?re.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],a=0,this},disable:function(){return h=u=n=e,this},disabled:function(){return!h},lock:function(){return u=e,n||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!h||o&&!u||(e=e||[],e=[t,e.slice?e.slice():e],r?u.push(e):c(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(n){re.each(e,function(e,r){var s=r[0],a=re.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,i):i}},o={};return i.pipe=i.then,re.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=te.call(arguments),s=r.length,a=1!==s||t&&re.isFunction(t.promise)?s:0,l=1===a?t:re.Deferred(),h=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?te.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>o;o++)r[o]&&re.isFunction(r[o].promise)?r[o].promise().done(h(o,i,r)).fail(l.reject).progress(h(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}}),re.support=function(e){var n=W.createElement("input"),i=W.createDocumentFragment(),o=W.createElement("div"),r=W.createElement("select"),s=r.appendChild(W.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=s.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!s.disabled,n=W.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===o.style.backgroundClip,re(function(){var n,i,r="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=W.getElementsByTagName("body")[0];s&&(n=W.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(o),o.innerHTML="",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",re.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===o.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(o,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(o,null)||{width:"4px"}).width,i=o.appendChild(W.createElement("div")),i.style.cssText=o.style.cssText=r,i.style.marginRight=i.style.width="0",o.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),e):e}({});var me,ge,_e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;o.uid=1,o.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=o.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,re.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,o=this.key(t),r=this.cache[o];if("string"==typeof e)r[e]=n;else if(re.isEmptyObject(r))re.extend(this.cache[o],e);else for(i in e)r[i]=e[i];return r},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var o;return n===e||n&&"string"==typeof n&&i===e?(o=this.get(t,n),o!==e?o:this.get(t,re.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,o,r,s=this.key(t),a=this.cache[s];if(n===e)this.cache[s]={};else{re.isArray(n)?o=n.concat(n.map(re.camelCase)):(r=re.camelCase(n),n in a?o=[n,r]:(o=r,o=o in a?[o]:o.match(ae)||[])),i=o.length;for(;i--;)delete a[o[i]]}},hasData:function(t){return!re.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]
}},me=new o,ge=new o,re.extend({acceptData:o.accepts,hasData:function(t){return me.hasData(t)||ge.hasData(t)},data:function(t,e,n){return me.access(t,e,n)},removeData:function(t,e){me.remove(t,e)},_data:function(t,e,n){return ge.access(t,e,n)},_removeData:function(t,e){ge.remove(t,e)}}),re.fn.extend({data:function(t,n){var i,o,s=this[0],a=0,l=null;if(t===e){if(this.length&&(l=me.get(s),1===s.nodeType&&!ge.get(s,"hasDataAttrs"))){for(i=s.attributes;i.length>a;a++)o=i[a].name,0===o.indexOf("data-")&&(o=re.camelCase(o.slice(5)),r(s,o,l[o]));ge.set(s,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){me.set(this,t)}):re.access(this,function(n){var i,o=re.camelCase(t);if(s&&n===e){if(i=me.get(s,t),i!==e)return i;if(i=me.get(s,o),i!==e)return i;if(i=r(s,o,e),i!==e)return i}else this.each(function(){var i=me.get(this,o);me.set(this,o,n),-1!==t.indexOf("-")&&i!==e&&me.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){me.remove(this,t)})}}),re.extend({queue:function(t,n,i){var o;return t?(n=(n||"fx")+"queue",o=ge.get(t,n),i&&(!o||re.isArray(i)?o=ge.access(t,n,re.makeArray(i)):o.push(i)),o||[]):e},dequeue:function(t,e){e=e||"fx";var n=re.queue(t,e),i=n.length,o=n.shift(),r=re._queueHooks(t,e),s=function(){re.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ge.get(t,n)||ge.access(t,n,{empty:re.Callbacks("once memory").add(function(){ge.remove(t,[e+"queue",n])})})}}),re.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?re.queue(this[0],t):n===e?this:this.each(function(){var e=re.queue(this,t,n);re._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},delay:function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,o=1,r=re.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=ge.get(s[a],t+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),r.promise(n)}});var ve,Le,be=/[\t\r\n\f]/g,we=/\r/g,xe=/^(?:input|select|textarea|button)$/i;re.fn.extend({attr:function(t,e){return re.access(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})},prop:function(t,e){return re.access(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[re.propFix[t]||t]})},addClass:function(t){var e,n,i,o,r,s=0,a=this.length,l="string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(be," "):" ")){for(r=0;o=e[r++];)0>i.indexOf(" "+o+" ")&&(i+=o+" ");n.className=re.trim(i)}return this},removeClass:function(t){var e,n,i,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(be," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=t?re.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):re.isFunction(t)?this.each(function(n){re(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=re(this),r=t.match(ae)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===Z||"boolean"===n)&&(this.className&&ge.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ge.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(be," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,o,r=this[0];return arguments.length?(o=re.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=o?t.call(this,i,re(this).val()):t,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(t){return null==t?"":t+""})),n=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,r,"value")!==e||(this.value=r))})):r?(n=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(r,"value"))!==e?i:(i=r.value,"string"==typeof i?i.replace(we,""):null==i?"":i)):void 0}}),re.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(re.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&re.nodeName(n.parentNode,"optgroup"))){if(e=re(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=re.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=re.inArray(re(i).val(),r)>=0)&&(n=!0);return n||(t.selectedIndex=-1),r}}},attr:function(t,n,i){var o,r,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===Z?re.prop(t,n,i):(1===s&&re.isXMLDoc(t)||(n=n.toLowerCase(),o=re.attrHooks[n]||(re.expr.match.bool.test(n)?Le:ve)),i===e?o&&"get"in o&&null!==(r=o.get(t,n))?r:(r=re.find.attr(t,n),null==r?e:r):null!==i?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:(t.setAttribute(n,i+""),i):(re.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(ae);if(r&&1===t.nodeType)for(;n=r[o++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!re.support.radioValue&&"radio"===e&&re.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var o,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!re.isXMLDoc(t),s&&(n=re.propFix[n]||n,r=re.propHooks[n]),i!==e?r&&"set"in r&&(o=r.set(t,i,n))!==e?o:t[n]=i:r&&"get"in r&&null!==(o=r.get(t,n))?o:t[n]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||xe.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Le={set:function(t,e,n){return e===!1?re.removeAttr(t,n):t.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,n){var i=re.expr.attrHandle[n]||re.find.attr;re.expr.attrHandle[n]=function(t,n,o){var r=re.expr.attrHandle[n],s=o?e:(re.expr.attrHandle[n]=e)!=i(t,n,o)?n.toLowerCase():null;return re.expr.attrHandle[n]=r,s}}),re.support.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,n){return re.isArray(n)?t.checked=re.inArray(re(t).val(),n)>=0:e}},re.support.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ce=/^key/,De=/^(?:mouse|contextmenu)|click/,ke=/^(?:focusinfocus|focusoutblur)$/,Pe=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,n,i,o,r){var s,a,l,h,u,c,d,p,f,m,g,_=ge.get(t);if(_){for(i.handler&&(s=i,i=s.handler,r=s.selector),i.guid||(i.guid=re.guid++),(h=_.events)||(h=_.events={}),(a=_.handle)||(a=_.handle=function(t){return typeof re===Z||t&&re.event.triggered===t.type?e:re.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],u=n.length;u--;)l=Pe.exec(n[u])||[],f=g=l[1],m=(l[2]||"").split(".").sort(),f&&(d=re.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=re.event.special[f]||{},c=re.extend({type:f,origType:g,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:m.join(".")},s),(p=h[f])||(p=h[f]=[],p.delegateCount=0,d.setup&&d.setup.call(t,o,m,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),re.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var r,s,a,l,h,u,c,d,p,f,m,g=ge.hasData(t)&&ge.get(t);if(g&&(l=g.events)){for(e=(e||"").match(ae)||[""],h=e.length;h--;)if(a=Pe.exec(e[h])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(c=re.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,d=l[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));s&&!d.length&&(c.teardown&&c.teardown.call(t,f,g.handle)!==!1||re.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)re.event.remove(t,p+e[h],n,i,!0);re.isEmptyObject(l)&&(delete g.handle,ge.remove(t,"events"))}},trigger:function(n,i,o,r){var s,a,l,h,u,c,d,p=[o||W],f=ie.call(n,"type")?n.type:n,m=ie.call(n,"namespace")?n.namespace.split("."):[];if(a=l=o=o||W,3!==o.nodeType&&8!==o.nodeType&&!ke.test(f+re.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),u=0>f.indexOf(":")&&"on"+f,n=n[re.expando]?n:new re.Event(f,"object"==typeof n&&n),n.isTrigger=r?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=o),i=null==i?[n]:re.makeArray(i,[n]),d=re.event.special[f]||{},r||!d.trigger||d.trigger.apply(o,i)!==!1)){if(!r&&!d.noBubble&&!re.isWindow(o)){for(h=d.delegateType||f,ke.test(h+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(o.ownerDocument||W)&&p.push(l.defaultView||l.parentWindow||t)}for(s=0;(a=p[s++])&&!n.isPropagationStopped();)n.type=s>1?h:d.bindType||f,c=(ge.get(a,"events")||{})[n.type]&&ge.get(a,"handle"),c&&c.apply(a,i),c=u&&a[u],c&&re.acceptData(a)&&c.apply&&c.apply(a,i)===!1&&n.preventDefault();return n.type=f,r||n.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),i)!==!1||!re.acceptData(o)||u&&re.isFunction(o[f])&&!re.isWindow(o)&&(l=o[u],l&&(o[u]=null),re.event.triggered=f,o[f](),re.event.triggered=e,l&&(o[u]=l)),n.result}},dispatch:function(t){t=re.event.fix(t);var n,i,o,r,s,a=[],l=te.call(arguments),h=(ge.get(this,"events")||{})[t.type]||[],u=re.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=re.event.handlers.call(this,t,h),n=0;(r=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,o=((re.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),o!==e&&(t.result=o)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,o,r,s,a=[],l=n.delegateCount,h=t.target;if(l&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!==this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==t.type){for(o=[],i=0;l>i;i++)s=n[i],r=s.selector+" ",o[r]===e&&(o[r]=s.needsContext?re(r,this).index(h)>=0:re.find(r,this,null,[h]).length),o[r]&&o.push(s);o.length&&a.push({elem:h,handlers:o})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,o,r,s=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||W,o=i.documentElement,r=i.body,t.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[re.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=De.test(o)?this.mouseHooks:Ce.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new re.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=W),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=re.extend(new re.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?re.event.trigger(o,null,e):re.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},re.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},re.Event=function(t,n){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?s:a):this.type=t,n&&re.extend(this,n),this.timeStamp=t&&t.timeStamp||re.now(),this[re.expando]=!0,e):new re.Event(t,n)},re.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!re.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),re.support.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){0===n++&&W.addEventListener(t,i,!0)},teardown:function(){0===--n&&W.removeEventListener(t,i,!0)}}}),re.fn.extend({on:function(t,n,i,o,r){var s,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(l in t)this.on(l,n,i,t[l],r);return this}if(null==i&&null==o?(o=n,i=n=e):null==o&&("string"==typeof n?(o=i,i=e):(o=i,i=n,n=e)),o===!1)o=a;else if(!o)return this;return 1===r&&(s=o,o=function(t){return re().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=re.guid++)),this.each(function(){re.event.add(this,t,o,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,re(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,n,t[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=a),this.each(function(){re.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?re.event.trigger(t,n,i,!0):e}});var Ee=/^.[^:#\[\.,]*$/,Te=/^(?:parents|prev(?:Until|All))/,Me=re.expr.match.needsContext,Ae={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;o>e;e++)if(re.contains(i[e],this))return!0}));for(e=0;o>e;e++)re.find(t,i[e],n);return n=this.pushStack(o>1?re.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=re(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(re.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(u(this,t||[],!0))},filter:function(t){return this.pushStack(u(this,t||[],!1))},is:function(t){return!!u(this,"string"==typeof t&&Me.test(t)?re(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=Me.test(t)||"string"!=typeof t?re(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,t))){n=r.push(n);break}return this.pushStack(r.length>1?re.unique(r):r)},index:function(t){return t?"string"==typeof t?ee.call(re(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?re(t,e):re.makeArray(t&&t.nodeType?[t]:t),i=re.merge(this.get(),n);return this.pushStack(re.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,n){return re.dir(t,"parentNode",n)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,n){return re.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return re.dir(t,"previousSibling",n)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return t.contentDocument||re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(n,i){var o=re.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=re.filter(i,o)),this.length>1&&(Ae[t]||re.unique(o),Te.test(t)&&o.reverse()),this.pushStack(o)}}),re.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?re.find.matchesSelector(i,t)?[i]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var o=[],r=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&re(t).is(i))break;o.push(t)}return o},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Be=/<([\w:]+)/,Oe=/<|&#?\w+;/,Ne=/<(?:script|style|link)/i,Ie=/^(?:checkbox|radio)$/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td,re.fn.extend({text:function(t){return re.access(this,function(t){return t===e?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=c(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=c(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?re.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||re.cleanData(g(n)),n.parentNode&&(e&&re.contains(n.ownerDocument,n)&&f(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(re.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return re.access(this,function(t){var n=this[0]||{},i=0,o=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Ne.test(t)&&!je[(Be.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Se,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(re.cleanData(g(n,!1)),n.innerHTML=t);n=0}catch(r){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=re.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],o=t[e++];o&&(i&&i.parentNode!==o&&(i=this.nextSibling),re(this).remove(),o.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=K.apply([],t);var i,o,r,s,a,l,h=0,u=this.length,c=this,f=u-1,m=t[0],_=re.isFunction(m);if(_||!(1>=u||"string"!=typeof m||re.support.checkClone)&&ze.test(m))return this.each(function(i){var o=c.eq(i);_&&(t[0]=m.call(this,i,o.html())),o.domManip(t,e,n)});if(u&&(i=re.buildFragment(t,this[0].ownerDocument,!1,!n&&this),o=i.firstChild,1===i.childNodes.length&&(i=o),o)){for(r=re.map(g(i,"script"),d),s=r.length;u>h;h++)a=i,h!==f&&(a=re.clone(a,!0,!0),s&&re.merge(r,g(a,"script"))),e.call(this[h],a,h);if(s)for(l=r[r.length-1].ownerDocument,re.map(r,p),h=0;s>h;h++)a=r[h],Ue.test(a.type||"")&&!ge.access(a,"globalEval")&&re.contains(l,a)&&(a.src?re._evalUrl(a.src):re.globalEval(a.textContent.replace(Re,"")))}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var n,i=[],o=re(t),r=o.length-1,s=0;r>=s;s++)n=s===r?this:this.clone(!0),re(o[s])[e](n),Q.apply(i,n.get());return this.pushStack(i)}}),re.extend({clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),l=re.contains(t.ownerDocument,t);if(!(re.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(s=g(a),r=g(t),i=0,o=r.length;o>i;i++)_(r[i],s[i]);if(e)if(n)for(r=r||g(t),s=s||g(a),i=0,o=r.length;o>i;i++)m(r[i],s[i]);else m(t,a);return s=g(a,"script"),s.length>0&&f(s,!l&&g(t,"script")),a},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,h,u=0,c=t.length,d=e.createDocumentFragment(),p=[];c>u;u++)if(o=t[u],o||0===o)if("object"===re.type(o))re.merge(p,o.nodeType?[o]:o);else if(Oe.test(o)){for(r=r||d.appendChild(e.createElement("div")),s=(Be.exec(o)||["",""])[1].toLowerCase(),a=je[s]||je._default,r.innerHTML=a[1]+o.replace(Se,"<$1></$2>")+a[2],h=a[0];h--;)r=r.lastChild;re.merge(p,r.childNodes),r=d.firstChild,r.textContent=""}else p.push(e.createTextNode(o));for(d.textContent="",u=0;o=p[u++];)if((!i||-1===re.inArray(o,i))&&(l=re.contains(o.ownerDocument,o),r=g(d.appendChild(o),"script"),l&&f(r),n))for(h=0;o=r[h++];)Ue.test(o.type||"")&&n.push(o);return d},cleanData:function(t){for(var n,i,r,s,a,l,h=re.event.special,u=0;(i=t[u])!==e;u++){if(o.accepts(i)&&(a=i[ge.expando],a&&(n=ge.cache[a]))){if(r=Object.keys(n.events||{}),r.length)for(l=0;(s=r[l])!==e;l++)h[s]?re.event.remove(i,s):re.removeEvent(i,s,n.handle);ge.cache[a]&&delete ge.cache[a]}delete me.cache[i[me.expando]]}},_evalUrl:function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),re.fn.extend({wrapAll:function(t){var e;return re.isFunction(t)?this.each(function(e){re(this).wrapAll(t.call(this,e))}):(this[0]&&(e=re(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return re.isFunction(t)?this.each(function(e){re(this).wrapInner(t.call(this,e))}):this.each(function(){var e=re(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(n){re(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}});var He,Ze,Ge=/^(none|table(?!-c[ea]).+)/,We=/^margin/,qe=RegExp("^("+se+")(.*)$","i"),$e=RegExp("^("+se+")(?!px)[a-z%]+$","i"),Ve=RegExp("^([+-])=("+se+")","i"),Je={BODY:"block"},Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:0,fontWeight:400},Ke=["Top","Right","Bottom","Left"],Qe=["Webkit","O","Moz","ms"];re.fn.extend({css:function(t,n){return re.access(this,function(t,n,i){var o,r,s={},a=0;if(re.isArray(n)){for(o=L(t),r=n.length;r>a;a++)s[n[a]]=re.css(t,n[a],!1,o);return s}return i!==e?re.style(t,n,i):re.css(t,n)},t,n,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){v(this)?re(this).show():re(this).hide()})}}),re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=He(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,l=re.camelCase(n),h=t.style;return n=re.cssProps[l]||(re.cssProps[l]=y(h,l)),a=re.cssHooks[n]||re.cssHooks[l],i===e?a&&"get"in a&&(r=a.get(t,!1,o))!==e?r:h[n]:(s=typeof i,"string"===s&&(r=Ve.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(re.css(t,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||re.cssNumber[l]||(i+="px"),re.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(h[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,o))===e||(h[n]=i)),e)}},css:function(t,n,i,o){var r,s,a,l=re.camelCase(n);return n=re.cssProps[l]||(re.cssProps[l]=y(t.style,l)),a=re.cssHooks[n]||re.cssHooks[l],a&&"get"in a&&(r=a.get(t,!0,i)),r===e&&(r=He(t,n,o)),"normal"===r&&n in Ye&&(r=Ye[n]),""===i||i?(s=parseFloat(r),i===!0||re.isNumeric(s)?s||0:r):r}}),He=function(t,n,i){var o,r,s,a=i||L(t),l=a?a.getPropertyValue(n)||a[n]:e,h=t.style;return a&&(""!==l||re.contains(t.ownerDocument,t)||(l=re.style(t,n)),$e.test(l)&&We.test(n)&&(o=h.width,r=h.minWidth,s=h.maxWidth,h.minWidth=h.maxWidth=h.width=l,l=a.width,h.width=o,h.minWidth=r,h.maxWidth=s)),l},re.each(["height","width"],function(t,n){re.cssHooks[n]={get:function(t,i,o){return i?0===t.offsetWidth&&Ge.test(re.css(t,"display"))?re.swap(t,Xe,function(){return C(t,n,o)}):C(t,n,o):e},set:function(t,e,i){var o=i&&L(t);return w(t,e,i?x(t,n,i,re.support.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,o),o):0)}}}),re(function(){re.support.reliableMarginRight||(re.cssHooks.marginRight={get:function(t,n){return n?re.swap(t,{display:"inline-block"},He,[t,"marginRight"]):e}}),!re.support.pixelPosition&&re.fn.position&&re.each(["top","left"],function(t,n){re.cssHooks[n]={get:function(t,i){return i?(i=He(t,n),$e.test(i)?re(t).position()[n]+"px":i):e}}})}),re.expr&&re.expr.filters&&(re.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Ke[i]+e]=r[i]||r[i-2]||r[0];return o}},We.test(t)||(re.cssHooks[t+e].set=w)});var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,on=/^(?:submit|button|image|reset|file)$/i,rn=/^(?:input|select|textarea|keygen)/i;re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&rn.test(this.nodeName)&&!on.test(t)&&(this.checked||!Ie.test(t))}).map(function(t,e){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),re.param=function(t,n){var i,o=[],r=function(t,e){e=re.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){r(this.name,this.value)});else for(i in t)P(i,t[i],n,r);return o.join("&").replace(tn,"+")},re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var sn,an,ln=re.now(),hn=/\?/,un=/#.*$/,cn=/([?&])_=[^&]*/,dn=/^(.*?):[ \t]*([^\r\n]*)$/gm,pn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_n=re.fn.load,yn={},vn={},Ln="*/".concat("*");try{an=G.href}catch(bn){an=W.createElement("a"),an.href="",an=an.href}sn=gn.exec(an.toLowerCase())||[],re.fn.load=function(t,n,i){if("string"!=typeof t&&_n)return _n.apply(this,arguments);var o,r,s,a=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l),t=t.slice(0,l)),re.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(r="POST"),a.length>0&&re.ajax({url:t,type:r,dataType:"html",data:n}).done(function(t){s=arguments,a.html(o?re("<div>").append(re.parseHTML(t)).find(o):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:pn.test(sn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ln,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?M(M(t,re.ajaxSettings),e):M(re.ajaxSettings,t)},ajaxPrefilter:E(yn),ajaxTransport:E(vn),ajax:function(t,n){function i(t,n,i,a){var h,c,y,v,b,x=n;2!==L&&(L=2,l&&clearTimeout(l),o=e,s=a||"",w.readyState=t>0?4:0,h=t>=200&&300>t||304===t,i&&(v=A(d,w,i)),v=S(d,v,w,h),h?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(re.lastModified[r]=b),b=w.getResponseHeader("etag"),b&&(re.etag[r]=b)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=v.state,c=v.data,y=v.error,h=!y)):(y=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(n||x)+"",h?m.resolveWith(p,[c,x,w]):m.rejectWith(p,[w,x,y]),w.statusCode(_),_=e,u&&f.trigger(h?"ajaxSuccess":"ajaxError",[w,d,h?c:y]),g.fireWith(p,[w,x]),u&&(f.trigger("ajaxComplete",[w,d]),--re.active||re.event.trigger("ajaxStop")))
}"object"==typeof t&&(n=t,t=e),n=n||{};var o,r,s,a,l,h,u,c,d=re.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?re(p):re.event,m=re.Deferred(),g=re.Callbacks("once memory"),_=d.statusCode||{},y={},v={},L=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===L){if(!a)for(a={};e=dn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===L?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return L||(t=v[n]=v[n]||t,y[t]=e),this},overrideMimeType:function(t){return L||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>L)for(e in t)_[e]=[_[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return o&&o.abort(e),i(0,e),this}};if(m.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||an)+"").replace(un,"").replace(mn,sn[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=re.trim(d.dataType||"*").toLowerCase().match(ae)||[""],null==d.crossDomain&&(h=gn.exec(d.url.toLowerCase()),d.crossDomain=!(!h||h[1]===sn[1]&&h[2]===sn[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(sn[3]||("http:"===sn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=re.param(d.data,d.traditional)),T(yn,d,n,w),2===L)return w;u=d.global,u&&0===re.active++&&re.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!fn.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(hn.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=cn.test(r)?r.replace(cn,"$1_="+ln++):r+(hn.test(r)?"&":"?")+"_="+ln++)),d.ifModified&&(re.lastModified[r]&&w.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&w.setRequestHeader("If-None-Match",re.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ln+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)w.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(d.beforeSend.call(p,w,d)===!1||2===L))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](d[c]);if(o=T(vn,d,n,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},d.timeout));try{L=1,o.send(y,i)}catch(x){if(!(2>L))throw x;i(-1,x)}}else i(-1,"No Transport");return w},getJSON:function(t,e,n){return re.get(t,e,n,"json")},getScript:function(t,n){return re.get(t,e,n,"script")}}),re.each(["get","post"],function(t,n){re[n]=function(t,i,o,r){return re.isFunction(i)&&(r=r||o,o=i,i=e),re.ajax({url:t,type:n,dataType:r,data:i,success:o})}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=re("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),W.head.appendChild(e[0])},abort:function(){n&&n()}}}});var wn=[],xn=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=wn.pop()||re.expando+"_"+ln++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(n,i,o){var r,s,a,l=n.jsonp!==!1&&(xn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&xn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=re.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(xn,"$1"+r):n.jsonp!==!1&&(n.url+=(hn.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return a||re.error(r+" was not called"),a[0]},n.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},o.always(function(){t[r]=s,n[r]&&(n.jsonpCallback=i.jsonpCallback,wn.push(r)),a&&re.isFunction(s)&&s(a[0]),a=s=e}),"script"):e}),re.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Cn=re.ajaxSettings.xhr(),Dn={0:200,1223:204},kn=0,Pn={};t.ActiveXObject&&re(t).on("unload",function(){for(var t in Pn)Pn[t]();Pn=e}),re.support.cors=!!Cn&&"withCredentials"in Cn,re.support.ajax=Cn=!!Cn,re.ajaxTransport(function(t){var n;return re.support.cors||Cn&&!t.crossDomain?{send:function(i,o){var r,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)a.setRequestHeader(r,i[r]);n=function(t){return function(){n&&(delete Pn[s],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?o(a.status||404,a.statusText):o(Dn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=Pn[s=kn++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var En,Tn,Mn=/^(?:toggle|show|hide)$/,An=RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),Sn=/queueHooks$/,Bn=[z],On={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=An.exec(e),r=o&&o[3]||(re.cssNumber[t]?"":"px"),s=(re.cssNumber[t]||"px"!==r&&+i)&&An.exec(re.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,re.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};re.Animation=re.extend(N,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],On[n]=On[n]||[],On[n].unshift(e)},prefilter:function(t,e){e?Bn.unshift(t):Bn.push(t)}}),re.Tween=U,U.prototype={constructor:U,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(re.cssNumber[n]?"":"px")},cur:function(){var t=U.propHooks[this.prop];return t&&t.get?t.get(this):U.propHooks._default.get(this)},run:function(t){var e,n=U.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.each(["toggle","show","hide"],function(t,e){var n=re.fn[e];re.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(F(e,!0),t,i,o)}}),re.fn.extend({fadeTo:function(t,e,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=re.isEmptyObject(t),r=re.speed(e,n,i),s=function(){var e=N(this,re.extend({},t),r);(o||ge.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,n,i){var o=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",r=re.timers,s=ge.get(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&Sn.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(i),e=!1,r.splice(n,1));(e||!i)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ge.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=re.timers,s=i?i.length:0;for(n.finish=!0,re.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),re.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),re.speed=function(t,e,n){var i=t&&"object"==typeof t?re.extend({},t):{complete:n||!n&&e||re.isFunction(t)&&t,duration:t,easing:n&&e||e&&!re.isFunction(e)&&e};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.timers=[],re.fx=U.prototype.init,re.fx.tick=function(){var t,n=re.timers,i=0;for(En=re.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||re.fx.stop(),En=e},re.fx.timer=function(t){t()&&re.timers.push(t)&&re.fx.start()},re.fx.interval=13,re.fx.start=function(){Tn||(Tn=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(Tn),Tn=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fx.step={},re.expr&&re.expr.filters&&(re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length}),re.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){re.offset.setOffset(this,t,e)});var n,i,o=this[0],r={top:0,left:0},s=o&&o.ownerDocument;return s?(n=s.documentElement,re.contains(n,o)?(typeof o.getBoundingClientRect!==Z&&(r=o.getBoundingClientRect()),i=R(s),{top:r.top+i.pageYOffset-n.clientTop,left:r.left+i.pageXOffset-n.clientLeft}):r):void 0},re.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,h,u=re.css(t,"position"),c=re(t),d={};"static"===u&&(t.style.position="relative"),a=c.offset(),r=re.css(t,"top"),l=re.css(t,"left"),h=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,h?(i=c.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),re.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):c.css(d)}},re.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===re.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(i=t.offset()),i.top+=re.css(t[0],"borderTopWidth",!0),i.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-re.css(n,"marginTop",!0),left:e.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||q;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||q})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var o="pageYOffset"===i;re.fn[n]=function(r){return re.access(this,function(n,r,s){var a=R(n);return s===e?a?a[i]:n[r]:(a?a.scrollTo(o?t.pageXOffset:s,o?s:t.pageYOffset):n[r]=s,e)},n,r,arguments.length,null)}}),re.each({Height:"height",Width:"width"},function(t,n){re.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,o){re.fn[o]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(o===!0||r===!0?"margin":"border");return re.access(this,function(n,i,o){var r;return re.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+t],r["scroll"+t],n.body["offset"+t],r["offset"+t],r["client"+t])):o===e?re.css(n,i,a):re.style(n,i,o,a)},n,s?o:e,s,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=re:"function"==typeof define&&define.amd&&define("jquery",[],function(){return re}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=re)}(window),L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:'<a target="_blank" href="http://opengeodata.org/microsoft-imagery-details">Bing © 2013 Microsoft Corporation</a>',culture:"",maxZoom:21},initialize:function(t,e){L.Util.setOptions(this,e),this._key=t,this._url=null,this.meta={},this.loadMetadata()},tile2quad:function(t,e,n){for(var i="",o=n;o>0;o--){var r=0,s=1<<o-1;0!=(t&s)&&(r+=1),0!=(e&s)&&(r+=2),i+=r}return i},getTileUrl:function(t,e){var e=this._getZoomForUrl(),n=this.options.subdomains,i=this.options.subdomains[Math.abs((t.x+t.y)%n.length)];return this._url.replace("{subdomain}",i).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){var t=this,e="_bing_metadata_"+L.Util.stamp(this);window[e]=function(n){t.meta=n,window[e]=void 0;var i=document.getElementById(e);return i.parentNode.removeChild(i),n.errorDetails?(alert("Got metadata"+n.errorDetails),void 0):(t.initMetadata(),void 0)};var n="http://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._key,i=document.createElement("script");i.type="text/javascript",i.src=n,i.id=e,document.getElementsByTagName("head")[0].appendChild(i)},initMetadata:function(){var t=this.meta.resourceSets[0].resources[0];this.options.subdomains=t.imageUrlSubdomains,this._url=t.imageUrl,this._providers=[];for(var e=0;e<t.imageryProviders.length;e++)for(var n=t.imageryProviders[e],i=0;i<n.coverageAreas.length;i++){var o=n.coverageAreas[i],r={zoomMin:o.zoomMin,zoomMax:o.zoomMax,active:!1},s=new L.LatLngBounds(new L.LatLng(o.bbox[0]+.01,o.bbox[1]+.01),new L.LatLng(o.bbox[2]-.01,o.bbox[3]-.01));r.bounds=s,r.attrib=n.attribution,this._providers.push(r)}this._update()},_update:function(){null!=this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=this._map.getBounds(),e=this._map.getZoom(),n=0;n<this._providers.length;n++){var i=this._providers[n];e<=i.zoomMax&&e>=i.zoomMin&&t.intersects(i.bounds)?i.active||(i.active=!0):(i.active&&this._map.attributionControl.removeAttribution(i.attrib),i.active=!1)}},onRemove:function(t){for(var e=0;e<this._providers.length;e++){var n=this._providers[e];n.active&&(this._map.attributionControl.removeAttribution(n.attrib),n.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}}),function(t){t.fn.equalize=function(e){var n,i,o=this,r=!1,s=!1;return t.isPlainObject(e)?(n=e.equalize||"height",r=e.children||!1,s=e.reset||!1,buffer=e.buffer||0):n=e||"height",t.isFunction(t.fn[n])?(i=n.indexOf("eight")>0?"height":"width",o.each(function(){var e=r?t(this).find(r):t(this).children(),o=0;e.each(function(){var e,r=t(this);s&&r.css(i,""),e=r[n](),e>o&&(o=e)}),e.css(i,o+buffer+"px")})):!1}}(jQuery);var geo2osm=function(t,e,n){function i(t,i){function a(t){l+=t.nodes,u+=t.ways,c+=t.relations}var l="",u="",c="";switch(i=i||{},t.type){case"Point":var d=s([t.coordinates]);l+='<node id="'+h+'" lat="'+d[0][1]+'" lon="'+d[0][0]+'">',l+=r(i),l+="</node>",h--;break;case"MultiPoint":break;case"LineString":break;case"MultiLineString":break;case"Polygon":a(o(t,i));break;case"MultiPolygon":c+='<relation id="'+h+'" changeset="'+e+'">',i.type="multipolygon",h--;for(var p=0;p<t.coordinates.length;p++)poly=o({coordinates:t.coordinates[p]},void 0,!0),l+=poly.nodes,u+=poly.ways,c+=poly.relations;c+=r(i),c+="</relation>"}return osm='<?xml version="1.0" encoding="UTF-8"?><osm version="0.6" generator="geo2osm.js">'+l+u+c+"</osm>",n&&(osm='<osmChange version="0.6" generator="geo2osm.js"><create>'+l+u+c+"</create></osmChange>"),{nodes:l,ways:u,relations:c,osm:osm}}function o(t,n,i){var o="",s="",l="",u="";if(n=n||{},i=i||!1,t.coordinates.length>1){i||(l+='<relation id="'+h+'" changeset="'+e+'">'),h--,n.type="multipolygon";for(var c=0;c<t.coordinates.length;c++){var d=[];u=0===c?"outer":"inner",l+='<member type="way" ref="'+h+'" role="'+u+'"/>',s+='<way id="'+h+'" changeset="'+e+'">',h--;for(var p=0;p<t.coordinates[c].length-1;p++)d.push([t.coordinates[c][p][1],t.coordinates[c][p][0]]);d=a(d,!0),o+=d.nodes,s+=d.nds,s+="</way>"}i||(l+=r(n),l+="</relation>")}else{var d=[];s+='<way id="'+h+'" changeset="'+e+'">',i&&(l+='<member type="way" ref="'+h+'" role="outer"/>'),h--;for(var f=0;f<t.coordinates[0].length-1;f++)d.push([t.coordinates[0][f][1],t.coordinates[0][f][0]]);d=a(d,!0),o+=d.nodes,s+=d.nds,s+=r(n),s+="</way>"}return{nodes:o,ways:s,relations:l}}function r(t){var e="";for(var n in t)null!=t[n]&&(e+='<tag k="'+n+'" v="'+t[n]+'"/>');return e}function s(t){for(var e=0;e<t.length;e++)t[e][0]=Math.round(1e6*t[e][0])/1e6,t[e][1]=Math.round(1e6*t[e][1])/1e6;return t}function a(t,n){var i="",o="",r=t.length;n=n||!1,t=s(t);for(var a=0;r>a;a++)n&&0===a&&(n=h),i+='<nd ref="'+h+'"/>',o+='<node id="'+h+'" lat="'+t[a][0]+'" lon="'+t[a][1]+'" changeset="'+e+'"/>',n&&a===r-1&&(i+='<nd ref="'+n+'"/>'),h--;return{nds:i,nodes:o}}n=n||!1;var l,h=-1;switch(e=e||!1,t.type){case"FeatureCollection":if(t.features){var u={nodes:"",ways:"",relations:""};l=[];for(var c=0;c<t.features.length;c++)l.push(i(t.features[c].geometry,t.features[c].properties));u.osm='<?xml version="1.0" encoding="UTF-8"?><osm version="0.6" generator="geo2osm.js">',n&&(u.osm='<osmChange version="0.6" generator="geo2osm.js"><create>');for(var d=0;d<l.length;d++)u.nodes+=l[d].nodes,u.ways+=l[d].ways,u.relations+=l[d].relations;u.osm+=u.nodes+u.ways+u.relations,u.osm+=n?"</create></osmChange>":"</osm>",l=u.osm}else console.log('Invalid GeoJSON object: FeatureCollection object missing "features" member.');break;case"GeometryCollection":if(t.geometries){l=[];for(var p=0;p<t.geometries.length;p++)l.push(i(t.geometries[p]))}else console.log('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;case"Feature":t.properties&&t.geometry?(l=i(t.geometry,t.properties),l=l.osm):console.log('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.');break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":t.coordinates?(l=i(t),l=l.osm):console.log('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:console.log('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString","Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return l};!function(t){t("a[data-reveal-id]").on("click",function(e){e.preventDefault();var n=t(this).attr("data-reveal-id");t("#"+n).reveal(t(this).data())}),t.fn.reveal=function(e){var n={animation:"fadeAndPop",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"},e=t.extend({},n,e);return this.each(function(){function n(){a=!1}function i(){a=!0}var o=t(this),r=parseInt(o.css("top")),s=o.height()+r,a=!1,l=t(".reveal-modal-bg");0==l.length&&(l=t('<div class="reveal-modal-bg" />').insertAfter(o)),o.bind("reveal:open",function(){l.unbind("click.modalEvent"),t("."+e.dismissmodalclass).unbind("click.modalEvent"),a||(i(),"fadeAndPop"==e.animation&&(o.css({top:t(document).scrollTop()-s,opacity:0,visibility:"visible"}),l.fadeIn(e.animationspeed/2),o.delay(e.animationspeed/2).animate({top:t(document).scrollTop()+r+"px",opacity:1},e.animationspeed,n())),"fade"==e.animation&&(o.css({opacity:0,visibility:"visible",top:t(document).scrollTop()+r}),l.fadeIn(e.animationspeed/2),o.delay(e.animationspeed/2).animate({opacity:1},e.animationspeed,n())),"none"==e.animation&&(o.css({visibility:"visible",top:t(document).scrollTop()+r}),l.css({display:"block"}),n())),o.unbind("reveal:open")}),o.bind("reveal:close",function(){a||(i(),"fadeAndPop"==e.animation&&(l.delay(e.animationspeed).fadeOut(e.animationspeed),o.animate({top:t(document).scrollTop()-s+"px",opacity:0},e.animationspeed/2,function(){o.css({top:r,opacity:1,visibility:"hidden"}),n()})),"fade"==e.animation&&(l.delay(e.animationspeed).fadeOut(e.animationspeed),o.animate({opacity:0},e.animationspeed,function(){o.css({opacity:1,visibility:"hidden",top:r}),n()})),"none"==e.animation&&(o.css({visibility:"hidden",top:r}),l.css({display:"none"}))),o.unbind("reveal:close")}),o.trigger("reveal:open"),t("."+e.dismissmodalclass).bind("click.modalEvent",function(){o.trigger("reveal:close")}),e.closeonbackgroundclick&&(l.css({cursor:"pointer"}),l.bind("click.modalEvent",function(){o.trigger("reveal:close")})),t("body").keyup(function(t){27===t.which&&o.trigger("reveal:close")})})}}(jQuery),function(t,e){L.drawVersion="0.2.1-dev",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers",remove:"Delete layers"}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.Util.extend(this.options,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){this._map&&(L.DomUtil.disableTextSelection(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire("draw:created",{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,drawError:{color:"#b00b00",message:L.drawLocal.draw.handlers.polyline.error,timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},zIndexOffset:2e3},initialize:function(t,e){e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&t||!this._shapeIsValid()?(this._showErrorTooltip(),void 0):(this._fireCreatedEvent(),this.disable(),void 0)},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var e=t.layerPoint,n=t.latlng;this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_onClick:function(t){var e=t.target.getLatLng(),n=this._markers.length;return n>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(e)?(this._showErrorTooltip(),void 0):(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(e)),this._poly.addLatLng(e),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._updateFinishHandler(),this._vertexAdded(e),this._clearGuides(),this._updateTooltip(),void 0)},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){t=t||this._map.latLngToLayerPoint(this._currentLatLng);var e=this._markers.length;e>0&&(this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,o,r,s=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)));for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane)),n=this.options.guidelineDistance;s>n;n+=this.options.guidelineDistance)i=n/s,o={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},r=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),r.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(r,o)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;n>e;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=this._measurementRunningTotal+this._currentLatLng.distanceTo(this._markers[this._markers.length-1].getLatLng()),n=e>1e3?(e/1e3).toFixed(2)+" km":Math.ceil(e)+" m",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:n}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:n}),t},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_vertexAdded:function(t){1===this._markers.length?this._measurementRunningTotal=0:this._measurementRunningTotal+=t.distanceTo(this._markers[this._markers.length-2].getLatLng())},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:3>this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._area),{text:t,subtext:e}},_shapeIsValid:function(){return this._markers.length>=3},_vertexAdded:function(){if(!this.options.allowIntersection&&this.options.showArea){var t=this._poly.getLatLngs(),e=L.PolygonUtil.geodesicArea(t);e=e>1e4?(1e-4*e).toFixed(2)+" ha":e.toFixed(2)+" m&sup2;",this._area=e}},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.simpleshape.tooltip.end}),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)
},_initialLabelText:L.drawLocal.draw.handlers.rectangle.tooltip.start,_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_initialLabelText:L.drawLocal.draw.handlers.circle.tooltip.start,_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng;this._tooltip.updatePosition(n),this._isDrawing&&(this._drawShape(n),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:"Release mouse to finish drawing.",subtext:"Radius: "+e+" m"}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?this._marker.setLatLng(e):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable()},_fireCreatedEvent:function(){var t=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,o=this._poly._latlngs;for(t=0,n=o.length;n>t;t++)i=this._createMarker(o[t],t),i.on("click",this._onMarkerClick,this),this._markers.push(i);var r,s;for(t=0,e=n-1;n>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(r=this._markers[e],s=this._markers[t],this._createMiddleMarker(r,s),this._updatePrevNext(r,s))},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(n),n},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._poly.spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){if(!(3>this._poly._latlngs.length)){var e=t.target;this._removeMarker(e),this._updatePrevNext(e._prev,e._next),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),e._prev&&e._next?this._createMiddleMarker(e._prev,e._next):e._prev?e._next||(e._prev._middleRight=null):e._next._middleLeft=null,this._fireEdit()}},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,o,r=this._getMiddleLatLng(t,e),s=this._createMarker(r);s.setOpacity(.6),t._middleRight=e._middleLeft=s,i=function(){var i=e._index;s._index=i,s.off("click",n,this).on("click",this._onMarkerClick,this),r.lat=s.getLatLng().lat,r.lng=s.getLatLng().lng,this._poly.spliceLatLngs(i,0,r),this._markers.splice(i,0,s),s.setOpacity(1),this._updateIndexes(i,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e)},o=function(){s.off("dragstart",i,this),s.off("dragend",o,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},n=function(){i.call(this),o.call(this),this._fireEdit()},s.on("click",n,this).on("dragstart",i,this).on("dragend",o,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.latLngToLayerPoint(t.getLatLng()),o=n.latLngToLayerPoint(e.getLatLng());return n.layerPointToLatLng(i._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var t=0,e=this._resizeMarkers.length;e>t;t++)this._unbindMarker(this._resizeMarkers[t]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(t){var e=t.target;e.setOpacity(0)},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw()},_onMarkerDragEnd:function(t){var e=t.target;e.setOpacity(1),this._shape.fire("edit"),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;n>e;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target,i=n._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,n,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds(),n=e.getCenter(),i.setLatLng(n)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape.getLatLngs(),i=this._shape.getBounds(),o=i.getCenter(),r=[],s=0,a=n.length;a>s;s++)e=[n[s].lat-o.lat,n[s].lng-o.lng],r.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(r),this._repositionCornerMarkers()},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter())},_getCorners:function(){var t=this._shape.getBounds(),e=t.getNorthWest(),n=t.getNorthEast(),i=t.getSouthEast(),o=t.getSouthWest();return[e,n,i,o]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;n>e;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;n>e;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t)},_resize:function(t){var e=this._moveMarker.getLatLng(),n=e.distanceTo(t);this._shape.setRadius(n)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.PolygonUtil={geodesicArea:function(t){var e,n,i=t.length,o=0,r=L.LatLng.DEG_TO_RAD;if(i>2){for(var s=0;i>s;s++)e=t[s],n=t[(s+1)%i],o+=(n.lng-e.lng)*r*(2+Math.sin(e.lat*r)+Math.sin(n.lat*r));o=40680631590769*o/2}return Math.abs(o)}},L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._originalPoints,o=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(t),e):!1},newPointIntersects:function(t,e){var n=this._originalPoints,i=n?n.length:0,o=n?n[i-1]:null,r=i-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(o,t,r,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,n=e?e.length:0;return n+=t||0,!this._originalPoints||3>=n},_lineSegmentsIntersectsRange:function(t,e,n,i){var o,r,s=this._originalPoints;i=i||0;for(var a=n;a>i;a--)if(o=s[a-1],r=s[a],L.LineUtil.segmentsIntersect(t,e,o,r))return!0;return!1}}),L.Polygon.include({intersects:function(){var t,e,n,i,o,r=this._originalPoints;return this._tooFewPointsForIntersection()?!1:(t=L.Polyline.prototype.intersects.call(this))?!0:(e=r.length,n=r[0],i=r[e-1],o=e-2,this._lineSegmentsIntersectsRange(i,n,o,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if("0.5.1">=L.version)throw Error("Leaflet.draw 0.2.0+ requires Leaflet 0.6.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e,n;this._toolbars={},L.DrawToolbar&&this.options.draw&&(n=new L.DrawToolbar(this.options.draw),e=L.stamp(n),this._toolbars[e]=n,this._toolbars[e].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(n=new L.EditToolbar(this.options.edit),e=L.stamp(n),this._toolbars[e]=n,this._toolbars[e].on("enable",this._toolbarEnabled,this))},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,o="leaflet-draw-toolbar-top";for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t),i||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=""+L.stamp(t.target);for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&n!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;n>e;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,o){var r=t.type;this._modes[r]={},this._modes[r].handler=t,this._modes[r].button=this._createButton({title:o,className:i+"-"+r,container:e,callback:this._modes[r].handler.enable,context:this._modes[r].handler}),this._modes[r].buttonIndex=n,this._modes[r].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container);return e.href="#",t.text&&(e.innerHTML=t.text),t.title&&(e.title=t.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){for(var e,n,i=L.DomUtil.create("ul","leaflet-draw-actions"),o=50,r=t.length,s=r*o+(r-1),a=0;r>a;a++)e=L.DomUtil.create("li","",i),n=this._createButton({title:t[a].title,text:t[a].text,container:e,callback:t[a].callback,context:t[a].context}),this._actionButtons.push({button:n,callback:t[a].callback});return i.style.width=s+"px",i},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=26,i=1,o=t*n+t*i-1;this._actionsContainer.style.top=o+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane),this._singleLineLabel=!1},dispose:function(){this._popupPane.removeChild(this._container),this._container=null},updateContent:function(t){return t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span>"+"<br />":"")+"<span>"+t.text+"</span>",this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t);return L.DomUtil.setPosition(this._container,e),this},showAsError:function(){return L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));L.Toolbar.prototype.initialize.call(this,t)},addToolbar:function(t){var e=L.DomUtil.create("div","leaflet-draw-section"),n=0,i="leaflet-draw-draw";return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(t,this.options.polyline),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(t,this.options.polygon),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(t,this.options.rectangle),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(t,this.options.circle),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(t,this.options.marker),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.marker),this._lastButtonIndex=--n,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),e.appendChild(this._toolbarContainer),e.appendChild(this._actionsContainer),e},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit=L.extend({},this.options.edit,t.edit)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},addToolbar:function(t){var e=L.DomUtil.create("div","leaflet-draw-section"),n=0,i="leaflet-draw-edit";return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,this.options.edit&&this._initModeHandler(new L.EditToolbar.Edit(t,{featureGroup:this.options.featureGroup,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,n++,i,L.drawLocal.edit.toolbar.buttons.edit),this.options.remove&&this._initModeHandler(new L.EditToolbar.Delete(t,{featureGroup:this.options.featureGroup}),this._toolbarContainer,n++,i,L.drawLocal.edit.toolbar.buttons.remove),this._lastButtonIndex=--n,this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]),e.appendChild(this._toolbarContainer),e.appendChild(this._actionsContainer),e},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),this._selectedPathOptions=e.selectedPathOptions,this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){this._map&&(this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(this._uneditedLayerProps[e]=t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?{latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?{latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:{latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())})},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t.setLatLng(this._uneditedLayerProps[e].latlng))},_toggleMarkerHighlight:function(t){var e=t._icon;e.style.display="none",L.DomUtil.hasClass(e,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,-4)):(L.DomUtil.addClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,4)),e.style.display=""},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"},_enableLayerEdit:function(t){var e,n=t.layer||t.target||t;this._backupLayer(n),this._selectedPathOptions&&(e=L.Util.extend({},this._selectedPathOptions),n instanceof L.Marker?this._toggleMarkerHighlight(n):(n.options.previousOptions=n.options,n instanceof L.Circle||n instanceof L.Polygon||n instanceof L.Rectangle||(e.fill=!1),n.setStyle(e))),n instanceof L.Marker?(n.dragging.enable(),n.on("dragend",this._onMarkerDragEnd)):n.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this)):e.editing.disable()},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),this.fire("disabled",{handler:this.type}))},addHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(t){var e=t.layer||t.target||t;e.on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e)},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)}})}(this,document),function(){L.Label=L.Popup.extend({options:{autoPan:!1,className:"",closePopupOnClick:!1,noHide:!1,offset:new L.Point(12,-15)},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&L.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),L.Browser.any3d&&t.on("zoomanim",this._zoomAnimation,this),this._update(),e&&L.DomUtil.setOpacity(this._container,1)},close:function(){var t=this._map;t&&(t._label=null,t.removeLayer(this))},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated")},_updateContent:function(){this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content)},_updateLayout:function(){},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},_setPosition:function(t){t=t.add(this.options.offset),L.DomUtil.setPosition(this._container,t)},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)}}),L.Icon.Default.mergeOptions({labelAnchor:new L.Point(9,-20)}),L.Marker.mergeOptions({icon:new L.Icon.Default}),L.Marker.include({showLabel:function(){return this._label&&this._map&&(this._label.setLatLng(this._latlng),this._map.showLabel(this._label)),this},hideLabel:function(){return this._label&&this._label.close(),this},bindLabel:function(t,e){var n=L.point(this.options.icon.options.labelAnchor)||new L.Point(0,0);return n=n.add(L.Label.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=L.Util.extend({offset:n},e),this._label||(e.noHide||(this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),L.Browser.touch&&this.on("click",this.showLabel,this)),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this),this._haslabelHandlers=!0),this._label=new L.Label(e,this).setContent(t),this},unbindLabel:function(){return this._label&&(this.hideLabel(),this._label=null,this._haslabelHandlers&&(this.off("mouseover",this.showLabel).off("mouseout",this.hideLabel).off("remove",this.hideLabel).off("move",this._moveLabel),L.Browser.touch&&this.off("click",this.showLabel)),this._haslabelHandlers=!1),this},updateLabelContent:function(t){this._label&&this._label.setContent(t)},_moveLabel:function(t){this._label.setLatLng(t.latlng)}}),L.Path.include({bindLabel:function(t,e){return this._label&&this._label.options===e||(this._label=new L.Label(e,this)),this._label.setContent(t),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),L.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this._label&&(this._hideLabel(),this._label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel).off("mousemove",this._moveLabel).off("mouseout remove",this._hideLabel)),this},updateLabelContent:function(t){this._label&&this._label.setContent(t)},_showLabel:function(t){this._label.setLatLng(t.latlng),this._map.showLabel(this._label)},_moveLabel:function(t){this._label.setLatLng(t.latlng)},_hideLabel:function(){this._label.close()
}}),L.Map.include({showLabel:function(t){return this._label=t,this.addLayer(t)}}),L.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(t,e){return this.invoke("bindLabel",t,e)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(t){this.invoke("updateLabelContent",t)}})}(this);var osm2geo=function(t){function e(t){var e=(new XMLSerializer).serializeToString(t),n=new DOMParser;return n.parseFromString(e,"text/xml")}function n(t){var e=[];return t.length&&(e=[+t[0].getAttribute("minlon"),+t[0].getAttribute("minlat"),+t[0].getAttribute("maxlon"),+t[0].getAttribute("maxlat")]),e}function i(t){return!isNaN(parseFloat(t))&&isFinite(t)}function o(t){for(var e={},n=t.getElementsByTagName("tag"),o=n.length;o--;)e[n[o].getAttribute("k")]=i(n[o].getAttribute("v"))?+n[o].getAttribute("v"):n[o].getAttribute("v");return t.getAttribute("id")&&(e.osm_id=+t.getAttribute("id")),t.getAttribute("user")&&(e.osm_lastEditor=t.getAttribute("user")),t.getAttribute("version")&&(e.osm_version=+t.getAttribute("version")),t.getAttribute("changeset")&&(e.osm_lastChangeset=+t.getAttribute("changeset")),t.getAttribute("timestamp")&&(e.osm_lastEdited=t.getAttribute("timestamp")),l(e)}function r(t,e){return{geometry:{type:e,coordinates:[]},type:"Feature",properties:o(t)}}function s(){for(var t=u.getElementsByTagName("node"),e=t.length,n={},i=[];e--;){var o=t[e].getElementsByTagName("tag");n[t[e].getAttribute("id")]=[+t[e].getAttribute("lon"),+t[e].getAttribute("lat")],o.length&&i.push(t[e])}return{coords:n,withTags:i}}function a(){for(var t=u.getElementsByTagName("relation"),e=t.length,n=[],i={},o=0;e--;)if(_=r(t[e],"MultiPolygon"),"multipolygon"==_.properties.type){_.geometry.coordinates.push([]);for(var s=t[e].getElementsByTagName("member"),a=s.length;a--;)i[s[a].getAttribute("ref")]=o;delete _.properties.type,n[o]=_,o++}return{features:n,done:i}}function l(t){var e,n={},i=[];for(e in t)t.hasOwnProperty(e)&&i.push(e);for(i.sort(),e=0;e<i.length;e++)n[i[e]]=t[i[e]];return n}function h(){for(var t=d.withTags,e=0,n=t.length;n>e;e+=1){var i=r(t[e],"Point");i.geometry.coordinates=[+t[e].getAttribute("lon"),+t[e].getAttribute("lat")],c.features.push(i)}}var u=e(t),c={type:"FeatureCollection",features:[]},d=s();c.bbox=n(u.getElementsByTagName("bounds")),h();for(var p=a(),f=u.getElementsByTagName("way"),m=0,g=f.length;g>m;m+=1){var _={},y=f[m].getElementsByTagName("nd");y[0].getAttribute("ref")===y[y.length-1].getAttribute("ref")?(_=r(f[m],"Polygon"),_.geometry.coordinates.push([])):_=r(f[m],"LineString");for(var v=y.length;v--;){var L=d.coords[y[v].getAttribute("ref")];"Polygon"===_.geometry.type?_.geometry.coordinates[0].push(L):_.geometry.coordinates.push(L)}if(p.done[f[m].getAttribute("id")]){var b=p.done[f[m].getAttribute("id")];p.features[b].geometry.coordinates[0].push(_.geometry.coordinates);for(var w in _.properties)p.features[b].properties[w]||(p.features[b].properties[w]=_.properties[w])}else c.features.push(_)}for(var x=p.features.length;x--;)c.features.push(p.features[x]);return console.log(c),c};!function(t){if("function"==typeof bootstrap)bootstrap("osmauth",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeOsmAuth=t}else"undefined"!=typeof window?window.osmAuth=t():global.osmAuth=t()}(function(){var t;return function(t,e,n){function i(n,r){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!r&&s)return s(n,!0);if(o)return o(n,!0);throw Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var o=t[n][1][e];return i(o?o:e)},a,a.exports)}return e[n].exports}for(var o="function"==typeof require&&require,r=0;n.length>r;r++)i(n[r]);return i}({1:[function(t,e){var n=t("ohauth"),i=t("store");e.exports=function(t){function e(t){return t.oauth_timestamp=n.timestamp(),t.oauth_nonce=n.nonce(),t}function o(e,n){return 1===arguments.length?i.get(t.url+e):2===arguments.length?i.set(t.url+e,n):void 0}function r(t){return{oauth_consumer_key:t.oauth_consumer_key,oauth_signature_method:"HMAC-SHA1"}}var s={};return s.authenticated=function(){return!(!o("oauth_token")||!o("oauth_token_secret"))},s.logout=function(){return o("oauth_token",""),o("oauth_token_secret",""),o("oauth_request_token_secret",""),s},s.authenticate=function(i){function a(e,r){if(t.done(),e)return i(e);var s=n.stringQs(r.response);o("oauth_request_token_secret",s.oauth_token_secret),m.location=t.url+"/oauth/authorize?"+n.qsString({oauth_token:s.oauth_token,oauth_callback:location.href.replace("index.html","").replace(/#.*/,"")+t.landing})}function l(i){var s=t.url+"/oauth/access_token",a=e(r(t)),l=o("oauth_request_token_secret");a.oauth_token=i,a.oauth_signature=n.signature(t.oauth_secret,l,n.baseString("POST",s,a)),n.xhr("POST",s,a,null,{},h),t.loading()}function h(e,r){if(t.done(),e)return i(e);var a=n.stringQs(r.response);o("oauth_token",a.oauth_token),o("oauth_token_secret",a.oauth_token_secret),i(null,s)}if(s.authenticated())return i();s.logout();var u=e(r(t)),c=t.url+"/oauth/request_token";u.oauth_signature=n.signature(t.oauth_secret,"",n.baseString("POST",c,u));var d=600,p=550,f=[["width",d],["height",p],["left",screen.width/2-d/2],["top",screen.height/2-p/2]].map(function(t){return t.join("=")}).join(","),m=window.open("about:blank","oauth_window",f);n.xhr("POST",c,u,null,{},a),t.loading(),window.authComplete=function(t){var e=n.stringQs(t.split("?")[1]);l(e.oauth_token),delete window.authComplete}},s.xhr=function(i,a){function l(){var s=e(r(t)),a=t.url+i.path,l=o("oauth_token_secret");s.oauth_token=o("oauth_token"),s.oauth_signature=n.signature(t.oauth_secret,l,n.baseString(i.method,a,s)),n.xhr(i.method,a,s,i.content,i.options,h)}function h(t,e){return t?a(t):e.responseXML?a(t,e.responseXML):a(t,e.response)}return s.authenticated()?l():t.auto?s.authenticate(l):a("not authenticated",null)},s.preauth=function(t){return t?(t.oauth_token&&o("oauth_token",t.oauth_token),t.oauth_token_secret&&o("oauth_token_secret",t.oauth_token_secret),s):void 0},s.options=function(e){return arguments.length?(t=e,t.url=t.url||"http://www.openstreetmap.org",t.landing=t.landing||"land.html",t.loading=t.loading||function(){},t.done=t.done||function(){},s.preauth(t)):t},s.options(t),s}},{ohauth:2,store:3}],3:[function(e,n){!function(){function e(){try{return h in a&&a[h]}catch(t){return!1}}function i(t){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(r),c.appendChild(r),r.addBehavior("#default#userData"),r.load(h);var n=t.apply(s,e);return c.removeChild(r),n}}function o(t){return t.replace(f,"___")}var r,s={},a=window,l=a.document,h="localStorage",u="__storejs__";if(s.disabled=!1,s.set=function(){},s.get=function(){},s.remove=function(){},s.clear=function(){},s.transact=function(t,e,n){var i=s.get(t);null==n&&(n=e,e=null),void 0===i&&(i=e||{}),n(i),s.set(t,i)},s.getAll=function(){},s.serialize=function(t){return JSON.stringify(t)},s.deserialize=function(t){if("string"!=typeof t)return void 0;try{return JSON.parse(t)}catch(e){return t||void 0}},e())r=a[h],s.set=function(t,e){return void 0===e?s.remove(t):(r.setItem(t,s.serialize(e)),e)},s.get=function(t){return s.deserialize(r.getItem(t))},s.remove=function(t){r.removeItem(t)},s.clear=function(){r.clear()},s.getAll=function(){for(var t={},e=0;r.length>e;++e){var n=r.key(e);t[n]=s.get(n)}return t};else if(l.documentElement.addBehavior){var c,d;try{d=new ActiveXObject("htmlfile"),d.open(),d.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),d.close(),c=d.w.frames[0].document,r=c.createElement("div")}catch(p){r=l.createElement("div"),c=l.body}var f=RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");s.set=i(function(t,e,n){return e=o(e),void 0===n?s.remove(e):(t.setAttribute(e,s.serialize(n)),t.save(h),n)}),s.get=i(function(t,e){return e=o(e),s.deserialize(t.getAttribute(e))}),s.remove=i(function(t,e){e=o(e),t.removeAttribute(e),t.save(h)}),s.clear=i(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(h);for(var n,i=0;n=e[i];i++)t.removeAttribute(n.name);t.save(h)}),s.getAll=i(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(h);for(var n,i={},o=0;n=e[o];++o)i[n]=s.get(n);return i})}try{s.set(u,u),s.get(u)!=u&&(s.disabled=!0),s.remove(u)}catch(p){s.disabled=!0}s.enabled=!s.disabled,void 0!==n&&"function"!=typeof n?n.exports=s:"function"==typeof t&&t.amd?t(s):this.store=s}()},{}],2:[function(t,e){"use strict";var n=t("jshashes"),i=t("xtend"),o=new n.SHA1,r={};r.qsString=function(t){return Object.keys(t).sort().map(function(e){return r.percentEncode(e)+"="+r.percentEncode(t[e])}).join("&")},r.stringQs=function(t){return t.split("&").reduce(function(t,e){var n=e.split("=");return t[decodeURIComponent(n[0])]=null===n[1]?"":decodeURIComponent(n[1]),t},{})},r.rawxhr=function(t,e,n,i,o){var r=new XMLHttpRequest,s=/^20\d$/;r.onreadystatechange=function(){if(4==r.readyState&&0!==r.status){if(!s.test(r.status))return o(r,null);o(null,r)}},r.onerror=function(t){return o(t,null)},r.open(t,e,!0);for(var a in i)r.setRequestHeader(a,i[a]);r.send(n)},r.xhr=function(t,e,n,i,o,s){var a=o&&o.header||{"Content-Type":"application/x-www-form-urlencoded"};a.Authorization="OAuth "+r.authHeader(n),r.rawxhr(t,e,i,a,s)},r.nonce=function(){for(var t="";6>t.length;)t+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(61*Math.random())];return t},r.authHeader=function(t){return Object.keys(t).sort().map(function(e){return encodeURIComponent(e)+'="'+encodeURIComponent(t[e])+'"'}).join(", ")},r.timestamp=function(){return~~(+new Date/1e3)},r.percentEncode=function(t){return encodeURIComponent(t).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29")},r.baseString=function(t,e,n){return n.oauth_signature&&delete n.oauth_signature,[t,r.percentEncode(e),r.percentEncode(r.qsString(n))].join("&")},r.signature=function(t,e,n){return o.b64_hmac(r.percentEncode(t)+"&"+r.percentEncode(e),n)},r.headerGenerator=function(t){t=t||{};var e=t.consumer_key||"",n=t.consumer_secret||"",o=t.signature_method||"HMAC-SHA1",s=t.version||"1.0",a=t.token||"";return function(t,l,h){t=t.toUpperCase(),"string"==typeof h&&h.length>0&&(h=r.stringQs(h));var u=l.split("?",2),c=u[0],d=2===u.length?r.stringQs(u[1]):{},p={oauth_consumer_key:e,oauth_signature_method:o,oauth_version:s,oauth_timestamp:r.timestamp(),oauth_nonce:r.nonce()};a&&(p.oauth_token=a);var f=i({},p,d,h),m=r.baseString(t,c,f);return p.oauth_signature=r.signature(n,a,m),"OAuth "+r.authHeader(p)}},e.exports=r},{jshashes:4,xtend:5}],5:[function(t,e){function n(){for(var t={},e=0;arguments.length>e;e++){var n=arguments[e];if(o(n))for(var i=r(n),s=0;i.length>s;s++){var a=i[s];t[a]=n[a]}}return t}function i(t){var e=[];for(var n in t)e.push(n);return e}function o(t){return null!==t&&"object"==typeof t}var r=Object.keys||i;e.exports=n},{}],4:[function(e,n,i){!function(e){!function(){function o(t){for(var e,n,i="",o=-1,r=t.length;r>(o+=1);)e=t.charCodeAt(o),n=r>o+1?t.charCodeAt(o+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),o+=1),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|31&e>>>6,128|63&e):65535>=e?i+=String.fromCharCode(224|15&e>>>12,128|63&e>>>6,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|7&e>>>18,128|63&e>>>12,128|63&e>>>6,128|63&e));return i}function r(t){var e,n,i,o,r,s=[],a=t.length;for(e=n=i=o=r=0,t+="";a>e;)i=t.charCodeAt(e),n+=1,128>i?(s[n]=String.fromCharCode(i),e+=1):i>191&&224>i?(o=t.charCodeAt(e+1),s[n]=String.fromCharCode((31&i)<<6|63&o),e+=2):(o=t.charCodeAt(e+1),r=t.charCodeAt(e+2),s[n]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),e+=3);return s.join("")}function s(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function a(t,e){return t<<e|t>>>32-e}function l(t,e){for(var n,i=e?"0123456789ABCDEF":"0123456789abcdef",o="",r=0,s=t.length;s>r;r+=1)n=t.charCodeAt(r),o+=i.charAt(15&n>>>4)+i.charAt(15&n);return o}function h(t){var e,n=32*t.length,i="";for(e=0;n>e;e+=8)i+=String.fromCharCode(255&t[e>>5]>>>24-e%32);return i}function u(t){var e,n=32*t.length,i="";for(e=0;n>e;e+=8)i+=String.fromCharCode(255&t[e>>5]>>>e%32);return i}function c(t){var e,n=8*t.length,i=Array(t.length>>2),o=i.length;for(e=0;o>e;e+=1)i[e]=0;for(e=0;n>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function d(t){var e,n=8*t.length,i=Array(t.length>>2),o=i.length;for(e=0;o>e;e+=1)i[e]=0;for(e=0;n>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return i}function p(t,e){var n,i,o,r,s,a,l,h,u=e.length,c=[];for(a=Array(Math.ceil(t.length/2)),r=a.length,n=0;r>n;n+=1)a[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);for(;a.length>0;){for(s=[],o=0,n=0;a.length>n;n+=1)o=(o<<16)+a[n],i=Math.floor(o/u),o-=i*u,(s.length>0||i>0)&&(s[s.length]=i);c[c.length]=o,a=s}for(l="",n=c.length-1;n>=0;n--)l+=e.charAt(c[n]);for(h=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),n=l.length;h>n;n+=1)l=e[0]+l;return l}function f(t,e){var n,i,o,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",a=t.length;for(e=e||"=",n=0;a>n;n+=3)for(o=t.charCodeAt(n)<<16|(a>n+1?t.charCodeAt(n+1)<<8:0)|(a>n+2?t.charCodeAt(n+2):0),i=0;4>i;i+=1)s+=8*n+6*i>8*t.length?e:r.charAt(63&o>>>6*(3-i));return s}var m;m={VERSION:"1.0.3",Base64:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="=",n=!0;this.encode=function(i){var r,s,a,l="",h=i.length;for(e=e||"=",i=n?o(i):i,r=0;h>r;r+=3)for(a=i.charCodeAt(r)<<16|(h>r+1?i.charCodeAt(r+1)<<8:0)|(h>r+2?i.charCodeAt(r+2):0),s=0;4>s;s+=1)l+=8*r+6*s>8*h?e:t.charAt(63&a>>>6*(3-s));return l},this.decode=function(i){var o,s,a,l,h,u,c,d,p,f,m="",g=[];if(!i)return i;o=f=0,i=i.replace(RegExp("\\"+e,"gi"),"");do h=t.indexOf(i.charAt(o+=1)),u=t.indexOf(i.charAt(o+=1)),c=t.indexOf(i.charAt(o+=1)),d=t.indexOf(i.charAt(o+=1)),p=h<<18|u<<12|c<<6|d,s=255&p>>16,a=255&p>>8,l=255&p,f+=1,g[f]=64===c?String.fromCharCode(s):64===d?String.fromCharCode(s,a):String.fromCharCode(s,a,l);while(i.length>o);return m=g.join(""),m=n?r(m):m},this.setPad=function(t){return e=t||e,this},this.setTab=function(e){return t=e||t,this},this.setUTF8=function(t){return"boolean"==typeof t&&(n=t),this}},CRC32:function(t){var e,n,i,r=0,s=0,a=0;for(t=o(t),e=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),r=-1^r,n=0,i=t.length;i>n;n+=1)a=255&(r^t.charCodeAt(n)),s="0x"+e.substr(9*a,8),r=r>>>8^s;return(-1^r)>>>0},MD5:function(t){function e(t){return t=v?o(t):t,u(i(c(t),8*t.length))}function n(t,e){var n,r,s,a,l;for(t=v?o(t):t,e=v?o(e):e,n=c(t),n.length>16&&(n=i(n,8*t.length)),r=Array(16),s=Array(16),l=0;16>l;l+=1)r[l]=909522486^n[l],s[l]=1549556828^n[l];return a=i(r.concat(c(e)),512+8*e.length),u(i(s.concat(a),640))}function i(t,e){var n,i,o,r,a,l=1732584193,u=-271733879,c=-1732584194,p=271733878;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,n=0;t.length>n;n+=16)i=l,o=u,r=c,a=p,l=h(l,u,c,p,t[n+0],7,-680876936),p=h(p,l,u,c,t[n+1],12,-389564586),c=h(c,p,l,u,t[n+2],17,606105819),u=h(u,c,p,l,t[n+3],22,-1044525330),l=h(l,u,c,p,t[n+4],7,-176418897),p=h(p,l,u,c,t[n+5],12,1200080426),c=h(c,p,l,u,t[n+6],17,-1473231341),u=h(u,c,p,l,t[n+7],22,-45705983),l=h(l,u,c,p,t[n+8],7,1770035416),p=h(p,l,u,c,t[n+9],12,-1958414417),c=h(c,p,l,u,t[n+10],17,-42063),u=h(u,c,p,l,t[n+11],22,-1990404162),l=h(l,u,c,p,t[n+12],7,1804603682),p=h(p,l,u,c,t[n+13],12,-40341101),c=h(c,p,l,u,t[n+14],17,-1502002290),u=h(u,c,p,l,t[n+15],22,1236535329),l=d(l,u,c,p,t[n+1],5,-165796510),p=d(p,l,u,c,t[n+6],9,-1069501632),c=d(c,p,l,u,t[n+11],14,643717713),u=d(u,c,p,l,t[n+0],20,-373897302),l=d(l,u,c,p,t[n+5],5,-701558691),p=d(p,l,u,c,t[n+10],9,38016083),c=d(c,p,l,u,t[n+15],14,-660478335),u=d(u,c,p,l,t[n+4],20,-405537848),l=d(l,u,c,p,t[n+9],5,568446438),p=d(p,l,u,c,t[n+14],9,-1019803690),c=d(c,p,l,u,t[n+3],14,-187363961),u=d(u,c,p,l,t[n+8],20,1163531501),l=d(l,u,c,p,t[n+13],5,-1444681467),p=d(p,l,u,c,t[n+2],9,-51403784),c=d(c,p,l,u,t[n+7],14,1735328473),u=d(u,c,p,l,t[n+12],20,-1926607734),l=m(l,u,c,p,t[n+5],4,-378558),p=m(p,l,u,c,t[n+8],11,-2022574463),c=m(c,p,l,u,t[n+11],16,1839030562),u=m(u,c,p,l,t[n+14],23,-35309556),l=m(l,u,c,p,t[n+1],4,-1530992060),p=m(p,l,u,c,t[n+4],11,1272893353),c=m(c,p,l,u,t[n+7],16,-155497632),u=m(u,c,p,l,t[n+10],23,-1094730640),l=m(l,u,c,p,t[n+13],4,681279174),p=m(p,l,u,c,t[n+0],11,-358537222),c=m(c,p,l,u,t[n+3],16,-722521979),u=m(u,c,p,l,t[n+6],23,76029189),l=m(l,u,c,p,t[n+9],4,-640364487),p=m(p,l,u,c,t[n+12],11,-421815835),c=m(c,p,l,u,t[n+15],16,530742520),u=m(u,c,p,l,t[n+2],23,-995338651),l=g(l,u,c,p,t[n+0],6,-198630844),p=g(p,l,u,c,t[n+7],10,1126891415),c=g(c,p,l,u,t[n+14],15,-1416354905),u=g(u,c,p,l,t[n+5],21,-57434055),l=g(l,u,c,p,t[n+12],6,1700485571),p=g(p,l,u,c,t[n+3],10,-1894986606),c=g(c,p,l,u,t[n+10],15,-1051523),u=g(u,c,p,l,t[n+1],21,-2054922799),l=g(l,u,c,p,t[n+8],6,1873313359),p=g(p,l,u,c,t[n+15],10,-30611744),c=g(c,p,l,u,t[n+6],15,-1560198380),u=g(u,c,p,l,t[n+13],21,1309151649),l=g(l,u,c,p,t[n+4],6,-145523070),p=g(p,l,u,c,t[n+11],10,-1120210379),c=g(c,p,l,u,t[n+2],15,718787259),u=g(u,c,p,l,t[n+9],21,-343485551),l=s(l,i),u=s(u,o),c=s(c,r),p=s(p,a);return[l,u,c,p]}function r(t,e,n,i,o,r){return s(a(s(s(e,t),s(i,r)),o),n)}function h(t,e,n,i,o,s,a){return r(e&n|~e&i,t,e,o,s,a)}function d(t,e,n,i,o,s,a){return r(e&i|n&~i,t,e,o,s,a)}function m(t,e,n,i,o,s,a){return r(e^n^i,t,e,o,s,a)}function g(t,e,n,i,o,s,a){return r(n^(e|~i),t,e,o,s,a)}var _=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,y=t&&"string"==typeof t.pad?t.pda:"=",v=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return l(e(t,v),_)},this.b64=function(t){return f(e(t),y)},this.any=function(t,n){return p(e(t,v),n)},this.hex_hmac=function(t,e){return l(n(t,e),_)},this.b64_hmac=function(t,e){return f(n(t,e),y)},this.any_hmac=function(t,e,i){return p(n(t,e),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(_=t),this},this.setPad=function(t){return y=t||y,this},this.setUTF8=function(t){return"boolean"==typeof t&&(v=t),this}},SHA1:function(t){function e(t){return t=g?o(t):t,h(i(d(t),8*t.length))}function n(t,e){var n,r,s,a,l;for(t=g?o(t):t,e=g?o(e):e,n=d(t),n.length>16&&(n=i(n,8*t.length)),r=Array(16),s=Array(16),a=0;16>a;a+=1)r[a]=909522486^n[a],s[a]=1549556828^n[a];return l=i(r.concat(d(e)),512+8*e.length),h(i(s.concat(l),672))}function i(t,e){var n,i,o,l,h,c,d,p,f=Array(80),m=1732584193,g=-271733879,_=-1732584194,y=271733878,v=-1009589776;for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,n=0;t.length>n;n+=16){for(l=m,h=g,c=_,d=y,p=v,i=0;80>i;i+=1)f[i]=16>i?t[n+i]:a(f[i-3]^f[i-8]^f[i-14]^f[i-16],1),o=s(s(a(m,5),r(i,g,_,y)),s(s(v,f[i]),u(i))),v=y,y=_,_=a(g,30),g=m,m=o;m=s(m,l),g=s(g,h),_=s(_,c),y=s(y,d),v=s(v,p)}return[m,g,_,y,v]}function r(t,e,n,i){return 20>t?e&n|~e&i:40>t?e^n^i:60>t?e&n|e&i|n&i:e^n^i}function u(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}var c=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,m=t&&"string"==typeof t.pad?t.pda:"=",g=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return l(e(t,g),c)},this.b64=function(t){return f(e(t,g),m)},this.any=function(t,n){return p(e(t,g),n)},this.hex_hmac=function(t,e){return l(n(t,e))},this.b64_hmac=function(t,e){return f(n(t,e),m)},this.any_hmac=function(t,e,i){return p(n(t,e),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(c=t),this},this.setPad=function(t){return m=t||m,this},this.setUTF8=function(t){return"boolean"==typeof t&&(g=t),this}},SHA256:function(t){function e(t,e){return t=e?o(t):t,h(y(d(t),8*t.length))}function n(t,e){t=w?o(t):t,e=w?o(e):e;var n,i=0,r=d(t),s=Array(16),a=Array(16);for(r.length>16&&(r=y(r,8*t.length));16>i;i+=1)s[i]=909522486^r[i],a[i]=1549556828^r[i];return n=y(s.concat(d(e)),512+8*e.length),h(y(a.concat(n),768))}function i(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function u(t,e,n){return t&e^t&n^e&n}function c(t){return i(t,2)^i(t,13)^i(t,22)}function m(t){return i(t,6)^i(t,11)^i(t,25)}function g(t){return i(t,7)^i(t,18)^r(t,3)}function _(t){return i(t,17)^i(t,19)^r(t,10)}function y(t,e){var n,i,o,r,l,h,d,p,f,y,L,b,w=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],x=Array(64);for(t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e,f=0;t.length>f;f+=16){for(n=w[0],i=w[1],o=w[2],r=w[3],l=w[4],h=w[5],d=w[6],p=w[7],y=0;64>y;y+=1)x[y]=16>y?t[y+f]:s(s(s(_(x[y-2]),x[y-7]),g(x[y-15])),x[y-16]),L=s(s(s(s(p,m(l)),a(l,h,d)),v[y]),x[y]),b=s(c(n),u(n,i,o)),p=d,d=h,h=l,l=s(r,L),r=o,o=i,i=n,n=s(L,b);w[0]=s(n,w[0]),w[1]=s(i,w[1]),w[2]=s(o,w[2]),w[3]=s(r,w[3]),w[4]=s(l,w[4]),w[5]=s(h,w[5]),w[6]=s(d,w[6]),w[7]=s(p,w[7])}return w}var v,L=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,b=t&&"string"==typeof t.pad?t.pda:"=",w=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return l(e(t,w))},this.b64=function(t){return f(e(t,w),b)},this.any=function(t,n){return p(e(t,w),n)},this.hex_hmac=function(t,e){return l(n(t,e))},this.b64_hmac=function(t,e){return f(n(t,e),b)},this.any_hmac=function(t,e,i){return p(n(t,e),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(L=t),this},this.setPad=function(t){return b=t||b,this},this.setUTF8=function(t){return"boolean"==typeof t&&(w=t),this},v=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(t){function e(t){return t=b?o(t):t,h(i(d(t),8*t.length))}function n(t,e){t=b?o(t):t,e=b?o(e):e;var n,r=0,s=d(t),a=Array(32),l=Array(32);for(s.length>32&&(s=i(s,8*t.length));32>r;r+=1)a[r]=909522486^s[r],l[r]=1549556828^s[r];return n=i(a.concat(d(e)),1024+8*e.length),h(i(l.concat(n),1536))}function i(t,e){var n,i,o,l=Array(80),h=Array(16),d=[new r(1779033703,-205731576),new r(-1150833019,-2067093701),new r(1013904242,-23791573),new r(-1521486534,1595750129),new r(1359893119,-1377402159),new r(-1694144372,725511199),new r(528734635,-79577749),new r(1541459225,327033209)],p=new r(0,0),f=new r(0,0),v=new r(0,0),L=new r(0,0),b=new r(0,0),w=new r(0,0),x=new r(0,0),C=new r(0,0),D=new r(0,0),k=new r(0,0),P=new r(0,0),E=new r(0,0),T=new r(0,0),M=new r(0,0),A=new r(0,0),S=new r(0,0),B=new r(0,0);for(void 0===y&&(y=[new r(1116352408,-685199838),new r(1899447441,602891725),new r(-1245643825,-330482897),new r(-373957723,-2121671748),new r(961987163,-213338824),new r(1508970993,-1241133031),new r(-1841331548,-1357295717),new r(-1424204075,-630357736),new r(-670586216,-1560083902),new r(310598401,1164996542),new r(607225278,1323610764),new r(1426881987,-704662302),new r(1925078388,-226784913),new r(-2132889090,991336113),new r(-1680079193,633803317),new r(-1046744716,-815192428),new r(-459576895,-1628353838),new r(-272742522,944711139),new r(264347078,-1953704523),new r(604807628,2007800933),new r(770255983,1495990901),new r(1249150122,1856431235),new r(1555081692,-1119749164),new r(1996064986,-2096016459),new r(-1740746414,-295247957),new r(-1473132947,766784016),new r(-1341970488,-1728372417),new r(-1084653625,-1091629340),new r(-958395405,1034457026),new r(-710438585,-1828018395),new r(113926993,-536640913),new r(338241895,168717936),new r(666307205,1188179964),new r(773529912,1546045734),new r(1294757372,1522805485),new r(1396182291,-1651133473),new r(1695183700,-1951439906),new r(1986661051,1014477480),new r(-2117940946,1206759142),new r(-1838011259,344077627),new r(-1564481375,1290863460),new r(-1474664885,-1136513023),new r(-1035236496,-789014639),new r(-949202525,106217008),new r(-778901479,-688958952),new r(-694614492,1432725776),new r(-200395387,1467031594),new r(275423344,851169720),new r(430227734,-1194143544),new r(506948616,1363258195),new r(659060556,-544281703),new r(883997877,-509917016),new r(958139571,-976659869),new r(1322822218,-482243893),new r(1537002063,2003034995),new r(1747873779,-692930397),new r(1955562222,1575990012),new r(2024104815,1125592928),new r(-2067236844,-1578062990),new r(-1933114872,442776044),new r(-1866530822,593698344),new r(-1538233109,-561857047),new r(-1090935817,-1295615723),new r(-965641998,-479046869),new r(-903397682,-366583396),new r(-779700025,566280711),new r(-354779690,-840897762),new r(-176337025,-294727304),new r(116418474,1914138554),new r(174292421,-1563912026),new r(289380356,-1090974290),new r(460393269,320620315),new r(685471733,587496836),new r(852142971,1086792851),new r(1017036298,365543100),new r(1126000580,-1676669620),new r(1288033470,-885112138),new r(1501505948,-60457430),new r(1607167915,987167468),new r(1816402316,1246189591)]),i=0;80>i;i+=1)l[i]=new r(0,0);for(t[e>>5]|=128<<24-(31&e),t[(e+128>>10<<5)+31]=e,o=t.length,i=0;o>i;i+=32){for(s(v,d[0]),s(L,d[1]),s(b,d[2]),s(w,d[3]),s(x,d[4]),s(C,d[5]),s(D,d[6]),s(k,d[7]),n=0;16>n;n+=1)l[n].h=t[i+2*n],l[n].l=t[i+2*n+1];for(n=16;80>n;n+=1)a(A,l[n-2],19),u(S,l[n-2],29),c(B,l[n-2],6),E.l=A.l^S.l^B.l,E.h=A.h^S.h^B.h,a(A,l[n-15],1),a(S,l[n-15],8),c(B,l[n-15],7),P.l=A.l^S.l^B.l,P.h=A.h^S.h^B.h,g(l[n],E,l[n-7],P,l[n-16]);for(n=0;80>n;n+=1)T.l=x.l&C.l^~x.l&D.l,T.h=x.h&C.h^~x.h&D.h,a(A,x,14),a(S,x,18),u(B,x,9),E.l=A.l^S.l^B.l,E.h=A.h^S.h^B.h,a(A,v,28),u(S,v,2),u(B,v,7),P.l=A.l^S.l^B.l,P.h=A.h^S.h^B.h,M.l=v.l&L.l^v.l&b.l^L.l&b.l,M.h=v.h&L.h^v.h&b.h^L.h&b.h,_(p,k,E,T,y[n],l[n]),m(f,P,M),s(k,D),s(D,C),s(C,x),m(x,w,p),s(w,b),s(b,L),s(L,v),m(v,p,f);m(d[0],d[0],v),m(d[1],d[1],L),m(d[2],d[2],b),m(d[3],d[3],w),m(d[4],d[4],x),m(d[5],d[5],C),m(d[6],d[6],D),m(d[7],d[7],k)}for(i=0;8>i;i+=1)h[2*i]=d[i].h,h[2*i+1]=d[i].l;return h}function r(t,e){this.h=t,this.l=e}function s(t,e){t.h=e.h,t.l=e.l}function a(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n|e.l<<32-n}function u(t,e,n){t.l=e.h>>>n|e.l<<32-n,t.h=e.l>>>n|e.h<<32-n}function c(t,e,n){t.l=e.l>>>n|e.h<<32-n,t.h=e.h>>>n}function m(t,e,n){var i=(65535&e.l)+(65535&n.l),o=(e.l>>>16)+(n.l>>>16)+(i>>>16),r=(65535&e.h)+(65535&n.h)+(o>>>16),s=(e.h>>>16)+(n.h>>>16)+(r>>>16);t.l=65535&i|o<<16,t.h=65535&r|s<<16}function g(t,e,n,i,o){var r=(65535&e.l)+(65535&n.l)+(65535&i.l)+(65535&o.l),s=(e.l>>>16)+(n.l>>>16)+(i.l>>>16)+(o.l>>>16)+(r>>>16),a=(65535&e.h)+(65535&n.h)+(65535&i.h)+(65535&o.h)+(s>>>16),l=(e.h>>>16)+(n.h>>>16)+(i.h>>>16)+(o.h>>>16)+(a>>>16);t.l=65535&r|s<<16,t.h=65535&a|l<<16}function _(t,e,n,i,o,r){var s=(65535&e.l)+(65535&n.l)+(65535&i.l)+(65535&o.l)+(65535&r.l),a=(e.l>>>16)+(n.l>>>16)+(i.l>>>16)+(o.l>>>16)+(r.l>>>16)+(s>>>16),l=(65535&e.h)+(65535&n.h)+(65535&i.h)+(65535&o.h)+(65535&r.h)+(a>>>16),h=(e.h>>>16)+(n.h>>>16)+(i.h>>>16)+(o.h>>>16)+(r.h>>>16)+(l>>>16);t.l=65535&s|a<<16,t.h=65535&l|h<<16}var y,v=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,L=t&&"string"==typeof t.pad?t.pda:"=",b=t&&"boolean"==typeof t.utf8?t.utf8:!0;this.hex=function(t){return l(e(t))},this.b64=function(t){return f(e(t),L)},this.any=function(t,n){return p(e(t),n)},this.hex_hmac=function(t,e){return l(n(t,e))},this.b64_hmac=function(t,e){return f(n(t,e),L)},this.any_hmac=function(t,e,i){return p(n(t,e),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(v=t),this},this.setPad=function(t){return L=t||L,this},this.setUTF8=function(t){return"boolean"==typeof t&&(b=t),this}},RMD160:function(t){function e(t){return t=_?o(t):t,i(r(c(t),8*t.length))}function n(t,e){t=_?o(t):t,e=_?o(e):e;var n,s,a=c(t),l=Array(16),h=Array(16);for(a.length>16&&(a=r(a,8*t.length)),n=0;16>n;n+=1)l[n]=909522486^a[n],h[n]=1549556828^a[n];return s=r(l.concat(c(e)),512+8*e.length),i(r(h.concat(s),672))}function i(t){var e,n="",i=32*t.length;for(e=0;i>e;e+=8)n+=String.fromCharCode(255&t[e>>5]>>>e%32);return n}function r(t,e){var n,i,o,r,l,c,p,f,m,g,_,w,x,C,D=1732584193,k=4023233417,P=2562383102,E=271733878,T=3285377520;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,r=t.length,o=0;r>o;o+=16){for(l=g=D,c=_=k,p=w=P,f=x=E,m=C=T,i=0;79>=i;i+=1)n=s(l,h(i,c,p,f)),n=s(n,t[o+y[i]]),n=s(n,u(i)),n=s(a(n,L[i]),m),l=m,m=f,f=a(p,10),p=c,c=n,n=s(g,h(79-i,_,w,x)),n=s(n,t[o+v[i]]),n=s(n,d(i)),n=s(a(n,b[i]),C),g=C,C=x,x=a(w,10),w=_,_=n;n=s(k,s(p,x)),k=s(P,s(f,C)),P=s(E,s(m,g)),E=s(T,s(l,_)),T=s(D,s(c,w)),D=n}return[D,k,P,E,T]}function h(t,e,n,i){return t>=0&&15>=t?e^n^i:t>=16&&31>=t?e&n|~e&i:t>=32&&47>=t?(e|~n)^i:t>=48&&63>=t?e&i|n&~i:t>=64&&79>=t?e^(n|~i):"rmd160_f: j out of range"}function u(t){return t>=0&&15>=t?0:t>=16&&31>=t?1518500249:t>=32&&47>=t?1859775393:t>=48&&63>=t?2400959708:t>=64&&79>=t?2840853838:"rmd160_K1: j out of range"}function d(t){return t>=0&&15>=t?1352829926:t>=16&&31>=t?1548603684:t>=32&&47>=t?1836072691:t>=48&&63>=t?2053994217:t>=64&&79>=t?0:"rmd160_K2: j out of range"}var m=t&&"boolean"==typeof t.uppercase?t.uppercase:!1,g=t&&"string"==typeof t.pad?t.pda:"=",_=t&&"boolean"==typeof t.utf8?t.utf8:!0,y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],L=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];
this.hex=function(t){return l(e(t,_))},this.b64=function(t){return f(e(t,_),g)},this.any=function(t,n){return p(e(t,_),n)},this.hex_hmac=function(t,e){return l(n(t,e))},this.b64_hmac=function(t,e){return f(n(t,e),g)},this.any_hmac=function(t,e,i){return p(n(t,e),i)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(t){return"boolean"==typeof t&&(m=t),this},this.setPad=function(t){return void 0!==t&&(g=t),this},this.setUTF8=function(t){return"boolean"==typeof t&&(_=t),this}}},function(o){var r=!1;"object"==typeof i&&(r=i,i&&"object"==typeof e&&e&&e===e.global&&(o=e)),"function"==typeof t&&"object"==typeof t.amd&&t.amd?t(function(){return m}):r?"object"==typeof n&&n&&n.exports===r?n.exports=m:r.Hashes=m:o.Hashes=m}(this)}()}(window)},{}]},{},[1])(1)}),window.osmly=function(){function t(t){return t.replace(/\W/g,"")}var e={};return e.settings={justMap:!1,featuresApi:"",db:"",writeApi:"http://api06.dev.openstreetmap.org",oauth_secret:"Mon0UoBHaO3qvfgwWrMkf4QAPM0O4lITd3JRK4ff",consumerKey:"yx996mtweTxLsaxWNc96R7vpfZHKQdoI9hzJRFwg",readApi:"http://www.overpass-api.de/api/xapi?map?",context:{},div:"map",origin:[0,0],zoom:2,demo:!1,changesetTags:{created_by:"osmly","osmly:version":"0",imagery_used:"Bing"},renameProperty:{},usePropertyAsTag:[],appendTag:{},featureStyle:{color:"#00FF00",weight:3,opacity:1,clickable:!1},contextStyle:{color:"#FFFF00",fillOpacity:.3,weight:3,opacity:1}},e.initialize=function(t){if("object"!=typeof t)return console.log("missing settings, see documentation"),void 0;for(var n in t)e.settings[n]=t[n];e.map=e.map(),e.justMap||e.ui.initialize()},e.auth=osmAuth({oauth_secret:e.settings.oauth_secret,oauth_consumer_key:e.settings.consumerKey,auto:!1,url:e.settings.writeApi}),e.token=function(n,i){return 2===arguments.length&&(localStorage[t(e.settings.writeApi)+n]=i),localStorage[t(e.settings.writeApi)+n]},e}(),osmly.map=function(){var t=L.map(osmly.settings.div,{center:osmly.settings.origin,layers:[new L.BingLayer("Arzdiw4nlOJzRwOz__qailc8NiR31Tt51dN2D7cm57NrnceZnCpgOkmJhNpGoppU")],zoom:osmly.settings.zoom,maxZoom:20});return t.on("move",function(){var e=t.getCenter(),n=e.lat.toFixed(4).toString(),i=e.lng.toFixed(4).toString(),o=t.getZoom().toString();osmly.osmlink="http://www.openstreetmap.org/?lat="+n+"&lon="+i+"&zoom="+o}),t.attributionControl.setPrefix(!1),t},osmly.ui=function(){function t(){$("#login").click(function(){s.notify(""),osmly.settings.demo?($("#login").fadeOut(500),osmly.item.next()):($("#login").fadeOut(500),osmly.auth.authenticate(function(){osmly.connect.getDetails(),osmly.item.next()}))}),$("#instruction").click(function(){$("#instruction-modal").reveal({animation:"fade",animationspeed:100,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})}),$("#changeset").click(function(t){t.preventDefault(),$("#changeset-modal").reveal({animation:"fade",animationspeed:100,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})}),$("#update-change").click(function(){osmly.settings.changesetTags.comment=$("#changeset-form").text(),osmly.connect.updateComment(function(){$("#changeset-modal").trigger("reveal:close"),$("#notify").fadeOut(250)})}),$("#josm").click(function(){$("#reset").click();var t=osmly.item.id,e=osmly.item.layer.toGeoJSON(),n=osmly.item.toOsm(e),i=osmly.settings.featuresApi+"db="+osmly.settings.db+"&id="+t+"&action=remote",o=osmly.item.bbox;$.ajax({type:"POST",url:i,crossDomain:!0,data:{remote:n}}).done(function(){$.ajax("http://127.0.0.1:8111/load_and_zoom?left="+o[0]+"&right="+o[2]+"&top="+o[3]+"&bottom="+o[1]).done(function(){$.ajax("http://127.0.0.1:8111/import?url="+i).done(function(){$("#reusable-modal span").text("Opened in JOSM"),$("#reusable-modal").reveal({animation:"fade",animationspeed:100,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})})}).fail(function(){$("#reusable-modal span").text("JOSM doesn't seem to be running. Start JOSM and try again."),$("#reusable-modal").reveal({animation:"fade",animationspeed:100,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"})})})}),$("#osmlink").click(function(){window.open(osmly.osmlink)})}function e(t){for(var e in t)null!==t[e]&&"null"!==t[e]&&$("#tags ul").append('<li><span class="k" spellcheck="false" contenteditable="true">'+e+"</span>"+'<span class="v" spellcheck="false" contenteditable="true">'+t[e]+"</span>"+'<span class="minus">-</span>'+"</li>")}function n(){$("ul").equalize({children:".k",equalize:"width",reset:!0}),$(".k").width($(".k").width()+13),$("ul").equalize({children:".v",equalize:"width",reset:!0}),$(".v").width($(".v").width()+13)}function i(){$("#action-block, #tags, #bottom-right").hide(),osmly.map.closePopup(),osmly.map.removeLayer(osmly.item.layer),osmly.item.contextLayer&&osmly.map.removeLayer(osmly.item.contextLayer)}function o(){i(),osmly.ui.teardown(),$(".foundicon-right-arrow").show().fadeOut(750),osmly.item.next()}function r(t){i(),osmly.settings.demo?(osmly.ui.teardown(),console.log(osmly.item.layer.toGeoJSON()),"submit"===t&&osmly.item.layer.toGeoJSON(),osmly.item.next()):(osmly.connect.updateItem(t),"submit"===t?osmly.connect.openChangeset(osmly.connect.submitToOSM):(osmly.ui.teardown(),osmly.item.next())),"submit"!==t&&(t="problem"),"submit"==t?$(".foundicon-up-arrow").show().fadeOut(750):"problem"==t&&$(".foundicon-remove").show().fadeOut(750)}var s={};return s.initialize=function(){osmly.settings.demo?(osmly.settings.demo&&$("#login").text("Demonstration »"),$("#login").fadeIn(500)):osmly.auth.authenticated()?(osmly.ui.setUserDetails(),osmly.item.next()):(osmly.token("user","demo"),$("#login").fadeIn(500)),t()},s.notify=function(t){""!==t&&(t="<span>"+t+"</span>"),t='<img src="loader.gif" />'+t,$("#notify").html(t).show()},s.setupItem=function(t){e(t),$("#submit").click(function(){r(event.target.id)}),$("#skip").click(function(){o()}),$("#problem").change(function(){r($("#problem").val())}),$(".k, .v").keypress(function(){n()}),$(".minus").click(function(){$("#tags li").length>1&&($(this).parent().remove(),n())}),$("#add-new-tag").click(function(){$("#tags ul").append('<li><span class="k" spellcheck="false" contenteditable="true"></span><span class="v" spellcheck="false" contenteditable="true"></span><span class="minus">-</span></li>'),n(),$(".k, .v").keypress(function(){n()}),$(".minus").click(function(){$("#tags li").length>1&&($(this).parent().remove(),n())})}),$("#reset").click(function(){i(),osmly.ui.teardown(),osmly.item.setItemLayer(osmly.item.data),s.setupItem(osmly.item.data.properties),s.displayItem(!0)})},s.displayItem=function(t){osmly.item.layer.addTo(osmly.map),osmly.item.contextLayer&&(osmly.item.contextLayer.addTo(osmly.map),osmly.item.contextLayer.bringToFront()),$("#notify, #login").fadeOut(250),$("#top-right, #bottom-right, #action-block").fadeIn(250),t?($("#tags").fadeIn(250),n()):($("#problem, #submit").hide(),$("#reusable-modal span").html("This feature is too complex. <a>Edit it in JOSM?</a>"),$("#reusable-modal").reveal({animation:"fade",animationspeed:200,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal"}))},s.teardown=function(){$("#problem, #skip, #submit, .minus, #add-new-tag, #reset").unbind(),$(".k, .v").unbind(),$("#problem").val("problem"),$("#problem, #submit").removeAttr("style"),$("#tags li").remove()},s.setUserDetails=function(){$("#user").html('<a href="'+osmly.settings.writeApi+"/user/"+osmly.token("user")+'/edits" target="_blank">'+osmly.token("user")+"</a>").fadeIn(500)},s}(),osmly.connect=function(){function t(t){osmly.ui.notify("creating a new changeset"),osmly.auth.xhr({method:"PUT",path:"/api/0.6/changeset/create",content:e(),options:{header:{"Content-Type":"text/xml"}}},function(e,n){n&&(osmly.token("changeset_id",n),t())})}function e(){var t="";for(var e in osmly.settings.changesetTags)t+='<tag k="'+e+'" v="'+osmly.settings.changesetTags[e]+'"/>';return"<osm><changeset>"+t+"</changeset></osm>"}function n(t,e){if(t)return console.log("error! try clearing your browser cache"),void 0;var n=e.getElementsByTagName("user")[0];osmly.token("user",n.getAttribute("display_name")),osmly.ui.setUserDetails()}function i(t,e){e&&!t||console.log(t),osmly.ui.teardown(),osmly.item.next()}var o={};return o.updateItem=function(t){var e=osmly.settings.featuresApi+"db="+osmly.settings.db+"&id="+osmly.item.id+"&action=problem";$.ajax({type:"POST",url:e,crossDomain:!0,data:{problem:t,user:osmly.token("user")}})},o.openChangeset=function(e){osmly.token("changeset_id")?(osmly.ui.notify("checking changeset status"),$.ajax({url:osmly.settings.writeApi+"/api/0.6/changeset/"+osmly.token("changeset_id"),cache:!1}).done(function(n){var i=n.getElementsByTagName("changeset");"true"===i[0].getAttribute("open")?e():t(e)})):t(e)},o.updateComment=function(t){osmly.connect.openChangeset(function(){osmly.ui.notify("updating changeset"),osmly.auth.xhr({method:"PUT",path:"/api/0.6/changeset/"+osmly.token("changeset_id"),content:e(),options:{header:{"Content-Type":"text/xml"}}},function(e){e||t()})})},o.getDetails=function(){osmly.auth.xhr({method:"GET",path:"/api/0.6/user/details"},n)},o.submitToOSM=function(){var t=osmly.token("changeset_id");$("#changeset").fadeIn(500),$("#changeset-link").html('<a href="'+osmly.settings.writeApi+"/browse/changeset/"+t+'" target="_blank">Details on osm.org »</a>');var e=osmly.item.layer.toGeoJSON();e.features[0].properties=osmly.item.getTags();var n=osmly.item.toOsmChange(e,osmly.token("changeset_id"));osmly.ui.notify("uploading to OSM"),osmly.auth.xhr({method:"POST",path:"/api/0.6/changeset/"+t+"/upload",content:n,options:{header:{"Content-Type":"text/xml"}}},i)},o}(),osmly.item=function(){function t(t){if("Polygon"==t.type&&t.coordinates.length>1)return!1;if("MultiPolygon"==t.type)for(var e=0,n=t.coordinates.length;n>e;e+=1)if(t.coordinates[e].length>1)return!1;return!0}function e(t){for(var e={type:"FeatureCollection",features:[]},n=0;n<t.features.length;n++){var i=t.features[n],o=!1;for(var r in i.properties)r in osmly.settings.context&&osmly.settings.context[r].indexOf(i.properties[r])>-1&&!o&&(o=!0);(o||!Object.keys(osmly.settings.context).length)&&e.features.push(i)}return e}function n(t){osmly.ui.notify("getting nearby OSM data");var n="bbox="+a.bbox.join(","),o=osmly.settings.readApi+n;$.ajax(o).done(function(n){osmly.ui.notify("rendering OSM data"),a.osmContext=osm2geo(n),a.filteredContext=e(a.osmContext),i(a.filteredContext),t()})}function i(t){osmly.item.contextLayer=L.geoJson(t,{style:osmly.settings.contextStyle,onEachFeature:function(t,e){var n="",i="[NO NAME] click for tags",o=0,r=Object.keys(t.properties);if(t.properties){for(t.properties.name&&(i=t.properties.name);o<r.length;)n+='<li><span class="b">'+r[o]+"</span>: "+t.properties[r[o]]+"</li>",o++;e.bindPopup(n),e.bindLabel(i)}},pointToLayer:function(t,e){return L.circleMarker(e,{radius:6,opacity:1,fillOpacity:.33})}})}function o(){for(var t in osmly.settings.renameProperty){var e=osmly.settings.renameProperty[t];a.data.properties[e]=a.data.properties[t]}}function r(){for(var t in a.data.properties)-1===osmly.settings.usePropertyAsTag.indexOf(t)&&(a.data.properties[t]=null)}function s(){for(var t in osmly.settings.appendTag)a.data.properties[t]=osmly.settings.appendTag[t]}var a={};return a.next=function(){osmly.ui.notify("getting next item"),$("#tags li").remove();var e=osmly.settings.featuresApi+"db="+osmly.settings.db;$.ajax(e).done(function(e){a.data=JSON.parse(e),a.id=a.data.properties.id,a.bbox=a.data.properties.bounds,a.isEditable=t(a.data.geometry),a.bbox=[a.bbox[0]-.001,a.bbox[1]-.001,a.bbox[2]+.001,a.bbox[3]+.001],a.setItemLayer(a.data),o(),r(),s(),a.isEditable?n(function(){osmly.ui.setupItem(a.data.properties),osmly.ui.displayItem(a.isEditable)}):(osmly.ui.setupItem(a.data.properties),osmly.ui.displayItem(a.isEditable))})},a.setItemLayer=function(t){osmly.item.layer=L.geoJson(t,{style:osmly.settings.featureStyle,onEachFeature:function(e,n){if(a.isEditable)if("MultiPolygon"==t.geometry.type)for(var i in n._layers)n._layers[i].editing.enable();else n.editing.enable()}}),osmly.map.fitBounds(osmly.item.layer.getBounds())},a.getTags=function(){var t=$("#tags li"),e={};return t.each(function(t,n){var i=$(n).children(".k").text(),o=$(n).children(".v").text();""!==i&&""!==o&&(e[i]=o)}),e},a.toOsm=function(t){return geo2osm(t)},a.toOsmChange=function(t,e){var n=geo2osm(t,e,!0);return console.log(n),n},a}();